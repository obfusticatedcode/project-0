"use strict";$(function(){function e(){var e=$(event.target).position();return f=a(e.top,e.left)}function t(e,t){return{top:t*(r+c)+"px",left:e*(r+c)+"px"}}function a(e,t){return{x:t/(r+c),y:e/(r+c)}}function o(){var e=$("div.square"),t=$("div.piece").map(function(t,o){var s=$(o).position(),i=a(s.top,s.left),n=8*i.y+i.x;return e[n]});return $("div.square.dark").not(t)}function s(e,t,a){e.css("top",t),e.css("left",a)}function i(e){e.hasClass("selected")?e.removeClass("selected"):($("div.piece").each(function(e,t){$(t).hasClass("selected")&&$(t).removeClass("selected")}),e.addClass("selected"))}function n(){$("#moveCounter").html(parseInt($("#moveCounter").html(),10)+1)}function l(){location.reload()}for(var r=46,c=2,d=$("div#board"),v=$("div#pieces"),u=$("#reset-button"),f=null,p=0;p<64;p++)d.append($("<div/>").addClass("square"));!function(){function e(e){return e%8%2^Math.floor(e/8)%2}$("div.square").each(function(t){0===e(t)?$(this).addClass("light"):$(this).addClass("dark")})}();for(var h=0;h<24;h++)v.append($("<div/>").addClass("piece"));!function(){$("piece"),$("div.piece:even").addClass("light"),$("div.piece:odd").addClass("dark")}(),$("div.piece.light").each(function(e,a){var o=Math.floor(e/4),i=e%4*2+(1-o%2),n=t(i,o);s($(a),n.top,n.left)}),$("div.piece.dark").each(function(e,a){var o=Math.floor(e/4)+5,i=e%4*2+(1-o%2),n=t(i,o);s($(a),n.top,n.left)}),o().addClass("movable"),u.on("click",function(){l()}),$("div.piece").on("click",function(t){var a=$(t.target);e();var o=f;console.log(o);var s=a.hasClass("dark");console.log(s);o.x+1&&o.y;console.log("This is a legal move : "+darkPieceMoveRight),i(a)}),$("div.square").on("click",function(a){e();var i=$(a.target);if(i.hasClass("movable")){var l=$("div.piece.selected");if(1===l.length){var r=i.prevAll().length,c=r%8,d=Math.floor(r/8),v=t(c,d);s(l,v.top,v.left),n(),l.removeClass("selected"),$("div.square").removeClass("movable"),o().addClass("movable")}}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY3VycmVudFBvc2l0aW9uIiwicG9zaXRpb24iLCJldmVudCIsInRhcmdldCIsImNvb3JkcyIsImdldENvb3JkcyIsInRvcCIsImxlZnQiLCJnZXRQaXhlbHMiLCJ4IiwieSIsIndpZHRoIiwiYm9yZGVyIiwiJHRha2VuU3F1YXJlcyIsImdldE1vdmFibGVTcXVhcmVzIiwiJHNxdWFyZXMiLCJtYXAiLCJpbmRleCIsInBpZWNlIiwiYWRkQ2xhc3MiLCJzcXVhcmVJbmRleCIsIm1vdmVQaWVjZVRvIiwibm90IiwibmV3TGVmdCIsIm5ld1RvcCIsIiRwaWVjZSIsImNzcyIsInRvZ2dsZVNlbGVjdCIsImhhc0NsYXNzIiwicmVzZXQiLCJlYWNoIiwicmVtb3ZlQ2xhc3MiLCJpbmNyZW1lbnRtb3ZlQ291bnRlciIsImh0bWwiLCJwYXJzZUludCIsImxvY2F0aW9uIiwicmVsb2FkIiwic3F1YXJlQ291bnQiLCIkYm9hcmQiLCIkcGllY2VzIiwiaSIsImFwcGVuZCIsImZsb29yIiwibGlnaHRPckRhcmsiLCJ0aGlzIiwiTWF0aCIsInBpeGVsUG9zaXRpb24iLCIkcmVzZXRCdXR0b24iLCJvbiIsImNvbnNvbGUiLCJkYXJrUGllY2UiLCJsb2ciLCIkdGhpc1BpZWNlIiwiZGFya1BpZWNlTW92ZVJpZ2h0IiwiZSIsIiRzZWxlY3RlZFBpZWNlIiwibGVuZ3RoIiwiJHBpZWNlVG9Nb3ZlIiwicHJldkFsbCIsInBpeGVscyJdLCJtYXBwaW5ncyI6IllBQ0FBLEdBQUUsV0E0SUVDLFFBQUFBLEtBQ0EsR0FBQUMsR0FBQUYsRUFBQUcsTUFBQUMsUUFBQUYsVUFOQSxPQU9BRyxHQUFBQyxFQUFBSixFQUFBSyxJQUFBTCxFQUFBTSxNQXVERSxRQUFBQyxHQUFBQyxFQUFBQyxHQUdBLE9BQ0FKLElBQUtBLEdBQU9LLEVBQUFBLEdBQVAsS0FGUEosS0FBQUUsR0FBQUUsRUFBQUMsR0FBQSxNQVVFLFFBQUFQLEdBQUFDLEVBQUFDLEdBR0osT0FDQUUsRUFBQUYsR0FBQUksRUFBQUMsR0FDRUYsRUFBTUcsR0FBQUEsRUFDRUQsSUFQVixRQUFTRSxLQWdCUCxHQUFBQyxHQUFBaEIsRUFBQSxjQUlFYyxFQUNBZCxFQUFBLGFBQUZpQixJQUFBLFNBQUFDLEVBQUFDLEdBRUUsR0FBQWpCLEdBQWtCa0IsRUFBQUEsR0FBU2xCLFdBQ2pDRyxFQUFBQyxFQUFBSixFQUFBSyxJQUFBTCxFQUFBTSxNQUNBYSxFQUFBLEVBQUFoQixFQUFBTSxFQUFBTixFQUFBSyxDQUNNLE9BQUFNLEdBQWlCSSxJQUtqQixPQURLRSxHQUFBQSxtQkFBVEMsSUFBbUNDLEdBZ0I3QnhCLFFBQUVzQixHQUFNRixFQUFTSyxFQUFqQkQsR0FJSEUsRUFOREMsSUFBQSxNQUFBRixHQU9FQyxFQUFBQyxJQUFBLE9BQUFILEdBa0NBLFFBQUFJLEdBQUFGLEdBS0pBLEVBQUFHLFNBQUEsWUFDQUgsRUFBU0ksWUFBTyxhQUVmOUIsRUFBQSxhQUFBK0IsS0FBQSxTQUFBYixFQUFBQyxHQUtBbkIsRUFBQW1CLEdBQUFVLFNBQUEsYUF4Qk83QixFQUFFbUIsR0FBT2EsWUFBWSxjQTJCL0JOLEVBQUFOLFNBQUEsYUFwQkUsUUFBU2EsS0FNUGpDLEVBQUUsZ0JBQWdCa0MsS0FBS0MsU0FBU25DLEVBQUUsZ0JBQWdCa0MsT0FBTyxJQUFJLEdBSS9ELFFBQVNKLEtBQ1BNLFNBQVNDLFNBL1JYLElBQU1DLEdBVkExQixHQUFRLEdBRGRDLEVBQUEsRUFDTUQsRUFBTlosRUFBQSxhQUNNYSxFQUFOYixFQUFBLGNBQ011QyxFQUFXdkMsRUFBQSxpQkFDWHdDLEVBQUFBLEtBT0FGLEVBQUFBLEVBQUFBLEVBRE4sR0FDeUJHLElBSXpCRixFQUFBRyxPQUFBMUMsRUFBQSxVQUFBb0IsU0FBQSxZQXNQSSxXQWtCRSxRQUFHcEIsR0FBUzZCLEdBZGQsTUFhQVgsR0FBQSxFQUtELEVBRFFFLEtBQVB1QixNQUFnQnpCLEVBQWhCLEdBR0gsRUFwQkdsQixFQUFBLGNBQ0QrQixLQUFBLFNBQUFiLEdBRUYsSUFBQTBCLEVBQUExQixHQWhCS2xCLEVBQUU2QyxNQUFNekIsU0FBUyxTQW1CbkJwQixFQUFBNkMsTUFBQXpCLFNBQUEsWUFyUEosS0FBSyxHQUFJcUIsR0FBRSxFQUFFQSxFQUFBQSxHQUFhQSxJQUt6QkQsRUFBQUUsT0FBQTFDLEVBQUEsVUFBQW9CLFNBQUEsV0FpTkNNLFdBR0QxQixFQUFBLFNBRURBLEVBQUEsa0JBQXNCb0IsU0FBQSxTQUdsQnBCLEVBQUEsaUJBQUFvQixTQUFBLFdBL01GcEIsRUFBQSxtQkFBQStCLEtBQUEsU0FBQWIsRUFBQUMsR0FJQSxHQUFBUixHQUFBbUMsS0FBQUgsTUFBQXpCLEVBQUEsR0FDTTZCLEVBQUFBLEVBQUFBLEVBQWdCdEMsR0FBQUEsRUFBWUUsRUFBbEMsR0FSRm9DLEVBQUF0QyxFQUFBQyxFQUFBQyxFQWFFVyxHQUFBdEIsRUFBQW1CLEdBQUE0QixFQUFBeEMsSUFBQXdDLEVBQUF2QyxRQUlBUixFQUFBLGtCQUFVK0IsS0FBV2IsU0FBV0EsRUFBaENDLEdBR0EsR0FBQVIsR0FBQW1DLEtBQUFILE1BQUF6QixFQUFBLEdBQUEsRUFDTTZCLEVBQUFBLEVBQUFBLEVBQWdCdEMsR0FBQUEsRUFBQUUsRUFBWUEsR0FQcENvQyxFQUFBdEMsRUFBQUMsRUFBQUMsRUFZRVcsR0FBQXRCLEVBQUFtQixHQUFBNEIsRUFBQXhDLElBQUF3QyxFQUFBdkMsUUFFRk8sSUFBb0JLLFNBQVMsV0FLN0I0QixFQUFhQyxHQUFHLFFBQVMsV0FJdkJuQixNQUdBOUIsRUFBQSxhQUFBaUQsR0FBQSxRQUFBLFNBQUE5QyxHQUVBLEdBQUllLEdBQUpsQixFQUFBRyxFQUFBQyxPQUVBOEMsSUFDQSxJQUFNQyxHQUFBQSxDQURORCxTQUFRRSxJQUFJbEMsRUFJWixJQUFBaUMsR0FBQUUsRUFBQXhCLFNBQUEsT0FDQXFCLFNBQUFFLElBQUFELEVBYUFqQyxHQUFBUixFQUFBLEdBQUFRLEVBQUFQLENBQ0F1QyxTQUFBRSxJQUFBLDBCQUFBRSxvQkErQkExQixFQUFBeUIsS0FlTXJELEVBQUEsY0FBQWlELEdBQUEsUUFBQSxTQUFBTSxHQUNKdEQsR0FHQSxJQUFJdUQsR0FBZUMsRUFBQUEsRUFBQUEsT0FJakIsSUFBQUMsRUFBVXhDLFNBQVYsV0FBQSxDQUdJLEdBQUFzQyxHQUFBeEQsRUFBQSxxQkFHSmlDLElBQUFBLElBQUFBLEVBQUFBLE9BQUFBLENBUEEsR0FBTWYsR0FBUXdDLEVBQWFDLFVBQVVGLE9BV2pDL0MsRUFBQVEsRUFBQSxFQUNGUCxFQUFBbUMsS0FBRkgsTUFBZ0JYLEVBQVksR0FDNUJqQixFQUFBQSxFQUFvQkssRUFBQUEsRUFHdkJFLEdBQUFrQyxFQUFBSSxFQUFBckQsSUFBQXFELEVBQUFwRCxNQVRHeUIsSUFFQXVCLEVBQWV4QixZQUFZLFlBZ0JqQ2hDLEVBQUEsY0FBQWdDLFlBQUEsV0FDQWpCLElBQUFLLFNBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9sb2FkaW5nIEpTXG4kKCgpPT57XG5cbiAgLy9HTE9CQUwgVkFSSUFCTEVTXG4gIGNvbnN0IHdpZHRoID0gNDY7XG4gIGNvbnN0IGJvcmRlciA9IDI7XG4gIGNvbnN0ICRib2FyZCA9ICQoJ2RpdiNib2FyZCcpO1xuICBjb25zdCAkcGllY2VzID0gJCgnZGl2I3BpZWNlcycpO1xuICBjb25zdCAkcmVzZXRCdXR0b24gPSAkKCcjcmVzZXQtYnV0dG9uJyk7XG4gIGxldCBjb29yZHMgPSBudWxsOy8vc2V0dGluZyBjb29yZHMgZ2xvYmFsbHkgc28gY29uc3RhbnRseSB1cGRhdGluZ1xuXG5cblxuICAvL0NyZWF0aW5nIHRoZSA2NCBzcXVhcmVzIGFuZCBhZGRpbmcgdGhlbSB0byB0aGUgRE9NXG4gIGNvbnN0IHNxdWFyZUNvdW50ID0gOCo4OyAvLzggcm93cyBieSA4IGNvbHVtbnM7IHplcm8gYmFzZWQgaW5kZXhcbiAgZm9yIChsZXQgaSA9IDA7aTxzcXVhcmVDb3VudDtpKyspIHtcblxuICAvL3RoaXMgbGluZSBjcmVhdGVzIGEgbmV3IGRpdiB3aXRoIHRoZSBjbGFzcyAnc3F1YXJlJ1xuICAvL2FuZCBhcHBlbmRzIGl0IHRvIHRoZSBkaXYgd2l0aCBpZCAnYm9hcmQnXG4gICAgJGJvYXJkLmFwcGVuZCgkKCc8ZGl2Lz4nKS5hZGRDbGFzcygnc3F1YXJlJykpO1xuICB9XG5cblxuICAvL3NldCB1cCB0aGUgYm9hcmQgd2l0aCB0aGUgY29ycmVjdCBjbGFzc2VzIGZvciB0aGUgbGlnaHQgYW5kIGRhcmsgc3F1YXJlc1xuICBzZXRVcEJvYXJkKCk7XG5cblxuICAgICAgLy9jcmVhdGluZyB0aGUgMjQgcGllY2VzIGFuZCBhZGRpbmcgdGhlbSB0byB0aGUgRE9NXG4gIGNvbnN0IHBpZWNlQ291bnQgPSAyNDtcbiAgZm9yIChsZXQgaT0wO2k8cGllY2VDb3VudDtpKyspIHtcblxuICAgIC8vdGhpcyBsaW5lIGFwcGVuZHMgYW4gZW1wdHkgZGl2IHdpdGggdGhlIGNsYXNzICdwaWVjZScgdG8gdGhlIGRpdiB3aXRoIGlkICdwaWVjZXMnXG4gICAgJHBpZWNlcy5hcHBlbmQoJCgnPGRpdi8+JykuYWRkQ2xhc3MoJ3BpZWNlJykpO1xuXG4gIH1cblxuXG4gIC8vc2V0cyB1cCB0aGUgY2xhc3NlcyBmb3IgdGhlIGRpZmZlcmVudCB0eXBlcyBvZiBwaWVjZVxuICBzZXRVcFBpZWNlcygpO1xuXG4gIC8vdGhpcyBsb29wIG1vdmVzIGFsbCB0aGUgbGlnaHQgcGllY2VzIHRvIHRoZWlyIGluaXRpYWwgcG9zaXRpb25zXG4gICQoJ2Rpdi5waWVjZS5saWdodCcpLmVhY2goZnVuY3Rpb24oaW5kZXgscGllY2UpIHtcblxuICAgIC8vdHVybmluZyB0aGUgaW5kZXggKGZyb20gMCAtIDExKVxuICAgIC8vaW50byBhIHgseSBzcXVhcmUgY29vcmRpbmF0ZSB1c2luZyBtYXRoXG4gICAgY29uc3QgeSA9IE1hdGguZmxvb3IoaW5kZXggLyA0KTtcbiAgICBjb25zdCB4ID0gKGluZGV4ICUgNCkgKiAyICsgKDEgLSB5JTIpO1xuXG4gICAgLy90dXJuaW5nIHRoZSB4LHkgY29vcmRpbmdhdGUgaW50byBhIHBpeGVsIHBvc2l0aW9uXG4gICAgY29uc3QgcGl4ZWxQb3NpdGlvbiA9IGdldFBpeGVscyh4LHkpO1xuICAgIC8vYWN0dWFsbHkgbW92aW5nIHRoZSBwaWVjZSB0byBpdHMgaW5pdGlhbCBwb3NpdGlvblxuICAgIG1vdmVQaWVjZVRvKCQocGllY2UpLHBpeGVsUG9zaXRpb24udG9wLHBpeGVsUG9zaXRpb24ubGVmdCk7XG4gIH0pO1xuXG4gICAgLy90aGlzIGxvb3AgbW92ZXMgYWxsIHRoZSBkYXJrIHBpZWNlcyB0byB0aGVpciBpbml0aWFsIHBvc2l0aW9uc1xuICAkKCdkaXYucGllY2UuZGFyaycpLmVhY2goZnVuY3Rpb24oaW5kZXgscGllY2UpIHtcbiAgICAvL3R1cm5pbmcgdGhlIGluZGV4IChmcm9tIDAgLSAxMSlcbiAgICAvL2ludG8gYSB4LHkgc3F1YXJlIGNvb3JkaW5hdGUgdXNpbmcgbWF0aFxuICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKGluZGV4LzQpICsgNTtcbiAgICBjb25zdCB4ID0gKGluZGV4ICUgNCkgKiAyICsgKDEteSUyKTtcblxuICAgIC8vdHVybmluZyB0aGUgeCx5IGNvb3JkaW5hdGUgaW50byBhIHBpeGVsIHBvc2l0aW9uXG4gICAgY29uc3QgcGl4ZWxQb3NpdGlvbiA9IGdldFBpeGVscyh4LHkpO1xuICAgIC8vbW92aW5nIHRoZSBwaWVjZSB0byBpdHMgaW5pdGlhbCBwb3NpdGlvblxuICAgIG1vdmVQaWVjZVRvKCQocGllY2UpLHBpeGVsUG9zaXRpb24udG9wLHBpeGVsUG9zaXRpb24ubGVmdCk7XG4gIH0pO1xuXG4gICAgLy9zZXQgdXAgaW5pdGlhbCBzcXVhcmVzIHRoZSBjbGFzcyAnbW92YWJsZScgcmVwcmVzZW50cyBhIHNxdWFyZVxuICAgIC8vdGhhdCBpcyB1bm9jY3VwaWVkIGFuZCB0aGlzIGFsbG93cyBhbGwgc3F1YXJlcyBkYXJrIHNxdWFyZXMgdG8gYmUgbW92YWJsZVxuICBnZXRNb3ZhYmxlU3F1YXJlcygpLmFkZENsYXNzKCdtb3ZhYmxlJyk7XG5cbiAgICAgIC8vRVZFTlRTXG5cbiAgICAvL3Jlc2V0dGluZyB0aGUgZ2FtZS5cbiAgJHJlc2V0QnV0dG9uLm9uKCdjbGljaycsICgpPT57XG4gICAgcmVzZXQoKTtcbiAgfSk7XG5cbiAgJCgnZGl2LnBpZWNlJykub24oJ2NsaWNrJywoZXZlbnQpPT57XG4gICAgLy90dXJuIGB0aGlzYCBpbnRvIGEgalF1ZXJ5IG9iamVjdFxuICAgIGNvbnN0ICR0aGlzUGllY2UgPSAkKGV2ZW50LnRhcmdldCk7XG4gICAgLy9URVNULiBjaGVja2luZyB0aGUgcGllY2UgaW5kZXguXG4gICAgY3VycmVudFBvc2l0aW9uKCk7IC8vcmVwcmVzZW50cyB4IGFuZCB5IGNvb3Jkc1xuICAgIGxldCBpbmRleCA9IGNvb3JkcztcbiAgICAvL2dldHRpbmcgdGhlIGxvY2F0aW9uIG9mIHRoZSBwaWVjZVxuICAgIGNvbnNvbGUubG9nKGluZGV4KTtcbiAgICBjb25zdCBkYXJrUGllY2UgPSAkdGhpc1BpZWNlLmhhc0NsYXNzKCdkYXJrJyk7XG4gICAgY29uc29sZS5sb2coZGFya1BpZWNlKTtcblxuICAgIC8vXG4gICAgLy91c2luZyB4IGFuZCB5IHZhbHVlcy5cbiAgICAvL3ggdmFsdWUgb24gdGhlIGZpcnN0Q29sdW1uIHdpbGwgYWx3YXlzIGJlIHplcm8gc2luY2UgdGhlIHN0YXJ0aW5nIGlzIGEgemVybyBiYXNlZCBpbmRleFxuICAgIC8veSB2YWx1ZSBvbiB0aGUgbGFzdENvbHVtbiB3aWxsIGFsd2F5cyBiZSBzZXZlbiBzaW5jZSB0aGUgbGFzdCBpbmRleCBvbiBhIDgqOCBpcyA3XG4gICAgLy9kYXJrUGllY2UgbW92aW5nIHJpZ2h0IGlzIHggKyAxIGFuZCB5IC0gMVxuICAgIC8vZGFya1BpZWNlIG1vdmluZyBsZWZ0IGlzIHggLSAxIGFuZCB5IC0gMVxuICAgIC8vbGlnaHRQaWVjZSBtb3ZpbmcgcmlnaHQgaXMgeCAtIDEgYW5kIHkgKyAxXG4gICAgLy9saWdodFBpZWNlIG1vdmluZyBsZWZ0IGlzIHggKyAxIGFuZCB5ICsgMVxuICAgIC8vQW5kIHRvIGp1bXAgd2lsbCBiZSArMiBzaW5nbGUgbW92ZW1lbnRzLlxuICAgIC8vY2hlY2sgaWYgZW1wdHkuLi5ieSBjaGVja2luZyBpZiBhIHNxdWFyZSBpcyBtb3ZhYmxlIGkuZS4gZ2V0TW92YWJsZVNxdWFyZXMoKS5hZGRDbGFzcygnbW92YWJsZScpO1xuICAgIC8vaWYgZW1wdHlcbiAgICBjb25zdCBkYXJrUGllY2VSaWdodE1vdmUgPSAoaW5kZXgueCArIDEgJiYgaW5kZXgueSAtIDEpO1xuICAgIGNvbnNvbGUubG9nKGBUaGlzIGlzIGEgbGVnYWwgbW92ZSA6ICR7ZGFya1BpZWNlTW92ZVJpZ2h0fWApO1xuXG4gICAgLy8gaWYgKGluZGV4ICUgd2lkdGggPT09IDAgJiYgJGRhcmtQaWVjZSl7XG4gICAgLy8gICBpbmRleCArIHdpZHRoICsgMVxuICAgIC8vIH1cbiAgICAvLyB0YWtlIHRoZSBpbmRleCB4IGFuZCB5IHZhbHVlIGFzIGluZGV4IGFuZCBjaGVja1xuICAgIC8vaWYgaW5kZXggJSB3aWR0aCA9PT0gMCB0aGUgZmlyc3QgY29sdW1uIG9yXG4gICAgLy9pZiBpbmRleCAlIHdpZHRoID09PSB3aWR0aC0xIHRoZSBsYXN0IGNvbHVtblxuICAgIC8vaWYgZmlyc3QgY29sdW1uIGlzIHRydWUgdGhlbiBjaGVjayBjb2xvci9wMSBvciBwMlxuICAgIC8vcDFcbiAgICAvL2lmIHAxIGNoZWNrIHNxdWFyZSBkaWFnb25hbGx5IGxlZnQgaWYgZW1wdHkgdXNpbmdcbiAgICAvL2luZGV4ICsgd2lkdGggKyAxIGFkZCB0aGUgY2xhc3MgJ21vdmFibGUnXG4gICAgLy9pZiBsYXN0IGNvbHVtbiBpcyB0cnVlIHRoZW4gY2hlY2sgY29sb3IvcDEgb3IgcDJcbiAgICAvL2lmIHAxIGNoZWNrIHNxdWFyZSBkaWFnb25hbGx5IHJpZ2h0IGlmIGVtcHR5IHVzaW5nXG4gICAgLy9pbmRleCArIHdpZHRoLTEgYWRkIHRoZSBjbGFzcyAnbW92YWJsZSdcbiAgICAvL3VzZSBDU1MgdG8gaGlnaGxpZ2h0IHRoZSBtb3ZhYmxlIHNxdWF1cmVzIChsZWdhbCBtb3ZlcylcbiAgICAvL3AyXG4gICAgLy9lbHNlIGl0J3MgcDJcblxuXG5cblxuXG5cbiAgICAvL3RvZ2dsaW5nIHRoZSAnc2VsZWN0ZWQnIGNsYXNzIG9mIHRoaXMgcGllY2VcbiAgICAvL2FuZCBwb3NzaWJsZSBkZXNlbGVjdGluZyBvdGhlciBwaWVjZXNcbiAgICB0b2dnbGVTZWxlY3QoJHRoaXNQaWVjZSk7XG5cbiAgfSk7XG5cbiAgLy9jaGVja3MgdGhlIGN1cnJlbnRQb3NpdGlvbiBvZiB0aGUgY2xpY2tlZCBvciBzZWxlY3RlZCBkaXYgYW5kIHJldHVybnMgdGhlIGNvb3Jkcy5cbiAgZnVuY3Rpb24gY3VycmVudFBvc2l0aW9uKCl7XG4gICAgY29uc3QgcG9zaXRpb24gPSAkKGV2ZW50LnRhcmdldCkucG9zaXRpb24oKTtcbiAgICBjb29yZHMgPSBnZXRDb29yZHMocG9zaXRpb24udG9wLHBvc2l0aW9uLmxlZnQpO1xuICAgIC8vIGNvbnNvbGUubG9nKGNvb3Jkcyk7Ly9nZXR0aW5nIHRoZSBsb2NhdGlvbiBvZiB0aGUgcGllY2VcbiAgICByZXR1cm4gY29vcmRzO1xuXG4gIH1cblxuICAkKCdkaXYuc3F1YXJlJykub24oJ2NsaWNrJywgKGUpPT57XG4gICAgY3VycmVudFBvc2l0aW9uKCk7Ly90aGUgY3VycmVudFBvc2l0aW9uIG9mIHRoZSBzcXVhcmU7IGNvb3Jkc1xuICAgIC8vIGNvbnNvbGUubG9nKCdjb29yZHMnLCBjb29yZHMpO1xuICAgIC8vdHVybiBgZSBvciBldmVudGAgaW50byBhIGpRdWVyeSBvYmplY3RcbiAgICBjb25zdCAkcGllY2VUb01vdmUgPSAkKGUudGFyZ2V0KTtcblxuXG4gICAgLy9pZiAkdGhpcyBpcyBhIGxlZ2FsIHNxdWFyZSB0byBtb3ZlIHRvLi4uXG4gICAgaWYgKCRwaWVjZVRvTW92ZS5oYXNDbGFzcygnbW92YWJsZScpKSB7XG5cbiAgICAgICAgICAvL2dldCB0aGUgcGllY2Ugd2l0aCB0aGUgY2xhc3MgJ3NlbGVjdGVkJ1xuICAgICAgY29uc3QgJHNlbGVjdGVkUGllY2UgPSAkKCdkaXYucGllY2Uuc2VsZWN0ZWQnKTtcblxuICAgICAgICAgIC8vb25seSBtb3ZlIGlmIHRoZXJlIGlzIGV4YWN0bHkgb25lIHNlbGVjdGVkIHBpZWNlXG4gICAgICBpZiAoJHNlbGVjdGVkUGllY2UubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvL2dldCB0aGUgaW5kZXggb2YgdGhlIHNxdWFyZVxuICAgICAgICAgICAgLy9hbmQgdHJhbnNsYXRlIGl0IHRvIHBpeGVsIHBvc2l0aW9uXG4gICAgICAgIGNvbnN0IGluZGV4ID0gJHBpZWNlVG9Nb3ZlLnByZXZBbGwoKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIDg7XG4gICAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKGluZGV4IC8gOCk7XG4gICAgICAgIGNvbnN0IHBpeGVscyA9IGdldFBpeGVscyh4LHkpO1xuICAgICAgICAgICAgLy9hY3R1YWxseSBkbyB0aGUgbW92aW5nXG4gICAgICAgIG1vdmVQaWVjZVRvKCRzZWxlY3RlZFBpZWNlLHBpeGVscy50b3AscGl4ZWxzLmxlZnQpO1xuICAgICAgICAgICAgLy9pbmNyZW1lbnQgdGhlIG1vdmUgY291bnRlclxuICAgICAgICBpbmNyZW1lbnRtb3ZlQ291bnRlcigpO1xuICAgICAgICAgICAgLy91bi1zZWxlY3QgdGhlIHBpZWNlXG4gICAgICAgICRzZWxlY3RlZFBpZWNlLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuXG4gICAgICAgICAgICAvL3NldCB0aGUgbmV3IGxlZ2FsIG1vdmVzXG4gICAgICAgICQoJ2Rpdi5zcXVhcmUnKS5yZW1vdmVDbGFzcygnbW92YWJsZScpO1xuICAgICAgICBnZXRNb3ZhYmxlU3F1YXJlcygpLmFkZENsYXNzKCdtb3ZhYmxlJyk7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgfSk7XG5cblxuICAvLyBNT1JFIEZVTkNUSU9OU1xuXG5cbiAgLy9mdW5jdGlvbiBmb3IgdHJhbnNsYXRpbmcgYW4geCx5IGNvb3JkaW5hdGVzIHRvIGEgcGl4ZWwgcG9zaXRpb25cbiAgLy90aGUgY29udmVudGlvbiBpcyB0aGF0IHRoZSBzcXVhcmUgaW4gdGhlIHVwcGVyIGxlZnQgY29ybmVyIGlzIGF0IHBvc2l0aW9uIDAsMFxuICAvL3RoZSBzcXVhcmUgaW4gdGhlIHVwcGVyIHJpZ2h0LCBhdCA3LDAgYW5kIHRoZSBsb3dlclxuICAvL3JpZ2h0IGF0IDcsN1xuICBmdW5jdGlvbiBnZXRQaXhlbHMoeCx5KSB7XG4gICAgICAvL3Rha2VzIGFuIHgseSBwb3NpdGlvbiwgcmV0dXJuc1xuICAgICAgLy9waXhlbHMgZnJvbSB0aGUgbGVmdCwgcmlnaHRcbiAgICByZXR1cm4ge1xuICAgICAgJ3RvcCc6ICh5ICogKHdpZHRoK2JvcmRlcikpKydweCcsXG4gICAgICAnbGVmdCc6ICh4ICogKHdpZHRoK2JvcmRlcikpKydweCdcbiAgICB9O1xuICB9XG5cbiAgLy9mdW5jdGlvbiBmb3IgdHVybmluZyBhIHBpeGVsIHBvc2l0aW9uXG4gIC8vaW50byB0aGUgeCx5IGNvb3JkaW5hdGUgb2YgYSBzcXVhcmUgb24gdGhlIGJvYXJkXG4gIC8vaXQgZm9sbG93cyB0aGUgc2FtZSBjb29yZGluYXRlIGNvbnZlbnRpb24gYXMgZ2V0UGl4ZWxzXG4gIGZ1bmN0aW9uIGdldENvb3Jkcyh0b3AsbGVmdCkge1xuICAgICAgLy9yZXR1cm5zIGFuIHggYW5kIGEgeVxuICAgICAgLy9naXZlbiBhIHRvcCBhbmQgbGVmdCBwaXhlbHNcbiAgICByZXR1cm4ge1xuICAgICAgJ3gnOiBsZWZ0IC8gKHdpZHRoICsgYm9yZGVyKSxcbiAgICAgICd5JzogdG9wIC8gKHdpZHRoICsgYm9yZGVyKVxuICAgIH07XG4gIH1cblxuICAvL3V0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHVybmluZ1xuICAvL3RoZSBzZXQgb2YgdW5vY2N1cGllZCBkYXJrIHNxdWFyZXNcbiAgLy8ocG9zc2libGUgcGxhY2VzIHRvIG1vdmUgYSBwaWVjZSlcbiAgZnVuY3Rpb24gZ2V0TW92YWJsZVNxdWFyZXMoKSB7XG4gICAgICAvL3NlbGVjdCBhbGwgb2YgdGhlIHNxdWFyZXNcbiAgICBjb25zdCAkc3F1YXJlcyA9ICQoJ2Rpdi5zcXVhcmUnKTtcblxuICAvL3NlbGVjdCB0aGUgb2NjdXBpZWQgb25lcyB1c2luZyB0aGUgalF1ZXJ5IG1hcCgpIG1ldGhvZFxuICAvL21hcCBjcmVhdGVzIGEgbmV3IG9iamVjdCBmcm9tIGFuIGV4aXN0aW5nIG9uZSB1c2luZyBhIHRyYW5zbGF0aW9uIGZ1bmN0aW9uXG4gICAgY29uc3QgJHRha2VuU3F1YXJlcyA9XG4gICAgICAgICAgJCgnZGl2LnBpZWNlJykubWFwKGZ1bmN0aW9uKGluZGV4LHBpZWNlKSB7XG4gICAgICAgICAgICAvL3RoaXMgZnVuY3Rpb24gdHJhbnNsYXRlcyBhIHBpZWNlXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9ICQocGllY2UpLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBjb29yZHMgPSBnZXRDb29yZHMocG9zaXRpb24udG9wLHBvc2l0aW9uLmxlZnQpO1xuICAgICAgICAgICAgY29uc3Qgc3F1YXJlSW5kZXggPSBjb29yZHMueSAqIDggKyBjb29yZHMueDtcbiAgICAgICAgICAgIHJldHVybiAkc3F1YXJlc1tzcXVhcmVJbmRleF07XG4gICAgICAgICAgfSk7XG5cbiAgICBjb25zdCAkb3V0ID0gJCgnZGl2LnNxdWFyZS5kYXJrJykubm90KCR0YWtlblNxdWFyZXMpO1xuICAgIHJldHVybiAkb3V0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0VXBQaWVjZXMoKSB7XG4gICAgICAvL3NlbGVjdCBhbGwgdGhlIGRpdnMgd2l0aCBjbGFzcyAncGllY2UnXG4gICAgJCgncGllY2UnKTtcbi8vYWRkIHRoZSAnbGlnaHQnIGNsYXNzIHRvIGhhbGYgb2YgdGhlbVxuICAgICQoJ2Rpdi5waWVjZTpldmVuJykuYWRkQ2xhc3MoJ2xpZ2h0Jyk7XG4vL2pRdWVyeSdzIGV2ZW4gYW5kIG9kZCBzZWxlY3RvciBtZXRob2RzIHRvIGFzc2lnbiB0aGUgY2xhc3NlcyAubGlnaHQgYW5kIC5kYXJrLlxuLy9hZGQgdGhlICdkYXJrJyB0byB0aGUgb3RoZXIgaGFsZlxuICAgICQoJ2Rpdi5waWVjZTpvZGQnKS5hZGRDbGFzcygnZGFyaycpO1xuXG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlUGllY2VUbygkcGllY2UsbmV3VG9wLG5ld0xlZnQpIHtcbiAgICAgIC8vc2V0IHRoZSBjc3MgJ3RvcCcgYW5kICdsZWZ0J1xuICAgICAgLy9hdHRyaWJ1dGVzIG9mIHRoZSBwYXNzZWQgcGllY2VcbiAgICAgIC8vdG8gdGhlIGFyZ3VtZW50cyBuZXdUb3AgYW5kIG5ld0xlZnRcbiAgICAkcGllY2UuY3NzKCd0b3AnLCBuZXdUb3ApO1xuICAgICRwaWVjZS5jc3MoJ2xlZnQnLCBuZXdMZWZ0KTtcblxuICB9XG5cbiAgZnVuY3Rpb24gc2V0VXBCb2FyZCgpIHtcbiAgICAgIC8vaXRlcmF0ZSB0aHJvdWdoIGFsbCBvZiB0aGUgZGl2cyB3aXRoIGNsYXNzIGBzcXVhcmVgXG4gICAgICAvL2ZpZ3VyZSBvdXQgd2hldGhlciBlYWNoIG9uZSBzaG91bGQgYmVcbiAgICAgIC8vbGlnaHQgb3IgZGFyaywgYW5kIGFzc2lnbiB0aGUgcHJvcGVyIGNsYXNzXG4gICAgY29uc3QgJGVhY2hTcXVhcmUgPSAkKCdkaXYuc3F1YXJlJyk7XG4gICAgJGVhY2hTcXVhcmUuZWFjaChmdW5jdGlvbihpbmRleCl7XG4gICAgICBpZihsaWdodE9yRGFyayhpbmRleCk9PT0gMCl7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2xpZ2h0Jyk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZGFyaycpO1xuICAgICAgfVxuICAgIH0pO1xuICAgICAgLy9pbm5lciBoZWxwZXIgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIG51bWJlciBiZXR3ZWVuXG4gICAgICAvLzAgYW5kIDYzIChpbmNsdXNpdmUpIGFuZCByZXR1cm5zIDEgaWYgdGhlIHNxdWFyZSBzaG91bGQgYmVcbiAgICAgIC8vZGFyaywgYW5kIDAgaWYgdGhlIHNxdWFyZSBzaG91bGQgYmUgbGlnaHRcbiAgICBmdW5jdGlvbiBsaWdodE9yRGFyayhpbmRleCkge1xuICAgICAgY29uc3QgeCA9IGluZGV4ICUgODtcbiAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKGluZGV4IC8gOCk7XG4gICAgICBjb25zdCBvZGRYID0geCAlIDI7XG4gICAgICBjb25zdCBvZGRZID0geSAlIDI7XG4gICAgICByZXR1cm4gKG9kZFggXiBvZGRZKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZVNlbGVjdCgkcGllY2UpIHtcbiAgICAgIC8vaWYgJHBpZWNlIGhhcyB0aGUgY2xhc3MgJ3NlbGVjdGVkJyxyZW1vdmUgaXRcbiAgICAgIC8vaWYgJHBpZWNlIGRvZXMgbm90IGhhdmUgdGhlIGNsYXNzICdzZWxlY3RlZCdcbiAgICAgIC8vbWFrZSBzdXJlIG5vIG90aGVyIGRpdnMgd2l0aCB0aGUgY2xhc3MgJ3BpZWNlJ1xuICAgICAgLy9oYXZlIHRoYXQgY2xhc3MsIHRoZW4gc2V0ICRwaWVjZSB0byBoYXZlIHRoZSBjbGFzc1xuICAgIGlmKCRwaWVjZS5oYXNDbGFzcygnc2VsZWN0ZWQnKSlcbiAgICAgICRwaWVjZS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICBlbHNlIHtcbiAgICAgICQoJ2Rpdi5waWVjZScpLmVhY2goZnVuY3Rpb24oaW5kZXgscGllY2UpIHtcbiAgICAgICAgaWYoJChwaWVjZSkuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpXG4gICAgICAgICAgJChwaWVjZSkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICB9KTtcbiAgICAgICRwaWVjZS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICB9XG5cbiAgfS8vZW5kIG9mIHRvZ2dsZVNlbGVjdCBmdW5jdGlvblxuXG4gIGZ1bmN0aW9uIGluY3JlbWVudG1vdmVDb3VudGVyKCkge1xuICAgICAgLy9nZXRzIHRoZSBodG1sIG9mIHRoZSBzcGFuIHdpdGggaWQgbW92ZUNvdW50ZXJcbiAgICAgIC8vdHVybnMgaXQgaW50byBhIG51bWJlclxuICAgICAgLy9pbmNyZW1lbnRzIGl0IGJ5IG9uZVxuICAgICAgLy9zZXRzIHRoZSBodG1sIG9mIHRoZSBzcGFuIHdpdGggaWQgbW92ZUNvdW50ZXJcbiAgICAgIC8vdG8gdGhlIG5ldyBtb3ZlIGNvdW50XG4gICAgJCgnI21vdmVDb3VudGVyJykuaHRtbChwYXJzZUludCgkKCcjbW92ZUNvdW50ZXInKS5odG1sKCksMTApKzEpO1xuICB9XG5cbiAgLy90aGlzIHJlc2V0cyB0aGUgZ2FtZSBieSBlZmZlY3RpdmVseSByZWxvYWRpbmcgdGhlIHBhZ2UgZnJvbSBjYWNoZVxuICBmdW5jdGlvbiByZXNldCgpe1xuICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICB9XG5cblxuXG5cbn0pOy8vZW5kIG9mIEpTIGxvYWRcblxuXG4vKlxuVE9ETzpcbjEuIFBsYXllciBjaGFuZ2UgZnJvbSBwbGF5ZXIgMSB0byBwbGF5ZXIgMlxuMi4gRmlndXJlIG91dCBob3cgdG8gc3RvcCBpbGxlZ2FsIG1vdmVzLlxuICAtb25seSBtYWtlIHR3byBwb3N0aXRpb25zIGF2YWlsYWJsZSBhdCBhbnkgZ2l2ZW4gdGltZVxuICAtb25jZSB0aGUgcGllY2UgaGFzIG1vdmVkIGludG8gYSBwb3NpdGlvbiBtYWtlXG5cbiAgLU9uIGNsaWNrIG9mIHNxYXVyZVxuICAtZ2V0IHBpZWNlIG9uIHNxYXVyZSAoZS50YXJnZXQpXG4gIC1jaGVjayBpZiBwaWVjZSBiZWxvbmdzIHRvIHAxIG9yIHAyXG4gIC1jaGVjayByZWxldmFudCBzcXVhcmVzXG4gICAgLmlmIGluZGV4IG9mIGN1cnJlbnRTcXVhcmVcbiAgICAuaWYgc3F1YXJlIGlzIG5vdCBpbiB0aGUgZmlyc3QgY29sdW1uXG4gICAgY2hlY2sgc3F1YXJlIGRpYWdvbmFsbHkgbGVmdCBhbmQgbW92YWJsZSBjbGFzcyBpZiBlbXB0eVxuICAgIC5pZiBzcXVhcmUgaXMgbm90IGluIHRoZSBsYXN0IGNvbHVtblxuICAgIGNoZWNrIHNxdWFyZSBkaWFnb25hbGx5IHJpZ2h0IGFuZCBtb3ZhYmxlIGNsYXNzIGlmIGVtcHR5XG4gIC1vbmNlIHBpZWNlIGlzIG1vdmVkIG9yIGlmIHVuLXNlbGVjdGVkIHJlbW92ZSBtb3ZhYmxlIGNsYXNzIGZyb20gYWxsIHNxdWFyZXMuXG5cbmluZGV4IChwb3NpdGlvbiklIHdpZHRoID09PSAwIC4uLnJlcHJlc2VudHMgdGhlIGZpcnN0IGNvbHVtblxuaW5kZXggJSB3aWR0aCA9PT0gd2lkdGgtMSAuLi5yZXByZXNlbnRzIHRoZSBsYXN0IGNvbHVtblxuXG5pbmRleCArIHdpZHRoLTEgZm9yIHBsYXllcjEgaXMgZ29pbmcgbGVmdCBkaWFnb25hbGx5XG5pbmRleCArIHdpZHRoLTEgZm9yIHBsYXllcjEgaXMgZ29pbmcgcmlnaHQgZGlhZ29uYWxseVxuXG5pbmRleCAtIHdpZHRoKzEgZm9yIHBsYXllcjIgaXMgZ29pbmcgbGVmdCBkaWFnb25hbGx5XG5pbmRleCAtIHdpZHRoLTEgZm9yIHBsYXllcjIgaXMgZ29pbmcgcmlnaHQgZGlhZ29uYWxseVxuXG5cbjMuIEp1bXAgbW92ZXMgdG8gbWFrZSB0aGUgb3Bwb25lbnRzIHBpZWNlIGRpc2FwcGVhciBmcm9tIHRoZSBib2FyZCBhbmQgcmVzZXRcbiAgdGhlIHBvc2l0b25cbjQuIEtpbmcgbWFrZXIgZnVuY3Rpb25cbjUuIEhvdyB0byB0YWtlIGluIHRoZSB0b3AgcmlnaHQgcG9zaXRpb25cbjYuUmVzZXQgdGhlIGdhbWUgYmV0dGVyXG5cblxuKi9cbiJdfQ==
