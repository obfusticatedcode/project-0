"use strict";$(function(){function e(){var e=$(event.target).position(),t=a(e.top,e.left);return console.log(t),t}function t(e,t){return{top:t*(c+r)+"px",left:e*(c+r)+"px"}}function a(e,t){return{x:t/(c+r),y:e/(c+r)}}function o(){var e=$("div.square"),t=$("div.piece").map(function(t,o){var s=$(o).position(),i=a(s.top,s.left),n=8*i.y+i.x;return e[n]});return $("div.square.dark").not(t)}function s(e,t,a){e.css("top",t),e.css("left",a)}function i(e){e.hasClass("selected")?e.removeClass("selected"):($("div.piece").each(function(e,t){$(t).hasClass("selected")&&$(t).removeClass("selected")}),e.addClass("selected"))}function n(){$("#moveCounter").html(parseInt($("#moveCounter").html(),10)+1)}function l(){location.reload()}for(var c=46,r=2,d=$("div#board"),v=$("div#pieces"),u=$("#reset-button"),f=0;f<64;f++)d.append($("<div/>").addClass("square"));!function(){function e(e){return e%8%2^Math.floor(e/8)%2}$("div.square").each(function(t){0===e(t)?$(this).addClass("light"):$(this).addClass("dark")})}();for(var p=0;p<24;p++)v.append($("<div/>").addClass("piece"));!function(){$("piece"),$("div.piece:even").addClass("light"),$("div.piece:odd").addClass("dark")}(),$("div.piece.light").each(function(e,a){var o=Math.floor(e/4),i=e%4*2+(1-o%2),n=t(i,o);s($(a),n.top,n.left)}),$("div.piece.dark").each(function(e,a){var o=Math.floor(e/4)+5,i=e%4*2+(1-o%2),n=t(i,o);s($(a),n.top,n.left)}),o().addClass("movable"),u.on("click",function(){l()}),$("div.piece").on("click",function(t){var a=$(t.target);e(),a.hasClass("dark")?console.log(a):console.log("This is a light piece"),i(a)}),$("div.square").on("click",function(e){var a=$(e.target);if(a.hasClass("movable")){var i=$("div.piece.selected");if(1===i.length){var l=a.prevAll().length,c=l%8,r=Math.floor(l/8),d=t(c,r);s(i,d.top,d.left),n(),i.removeClass("selected"),$("div.square").removeClass("movable"),o().addClass("movable")}}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY3VycmVudFBvc2l0aW9uIiwicG9zaXRpb24iLCJldmVudCIsInRhcmdldCIsIiRwaWVjZVRvTW92ZSIsInRvcCIsImxlZnQiLCJjb25zb2xlIiwibG9nIiwiY29vcmRzIiwiZ2V0Q29vcmRzIiwid2lkdGgiLCJib3JkZXIiLCJnZXRNb3ZhYmxlU3F1YXJlcyIsIngiLCJ5IiwiJG91dCIsIiR0YWtlblNxdWFyZXMiLCJtYXAiLCJpbmRleCIsInBpZWNlIiwiYWRkQ2xhc3MiLCJzcXVhcmVJbmRleCIsIiRzcXVhcmVzIiwibm90IiwibGlnaHRPckRhcmsiLCJuZXdUb3AiLCJuZXdMZWZ0IiwiJHBpZWNlIiwiY3NzIiwidG9nZ2xlU2VsZWN0IiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImxvY2F0aW9uIiwiZWFjaCIsImluY3JlbWVudG1vdmVDb3VudGVyIiwiaHRtbCIsInBhcnNlSW50IiwicmVzZXQiLCJyZWxvYWQiLCIkYm9hcmQiLCJpIiwic3F1YXJlQ291bnQiLCJhcHBlbmQiLCJNYXRoIiwiZmxvb3IiLCJvZGRYIiwib2RkWSIsInRoaXMiLCIkcGllY2VzIiwibW92ZVBpZWNlVG8iLCJwaXhlbFBvc2l0aW9uIiwiZ2V0UGl4ZWxzIiwiJHJlc2V0QnV0dG9uIiwib24iLCIkdGhpc1BpZWNlIiwiZSIsInBpeGVscyIsIiRzZWxlY3RlZFBpZWNlIiwibGVuZ3RoIiwicHJldkFsbCJdLCJtYXBwaW5ncyI6IllBQ0FBLEdBQUUsV0FxR0EsUUFBU0MsS0FTUCxHQUFBQyxHQUFBRixFQUFBRyxNQUFBQyxRQUFBRixXQUNNRyxFQUFBQSxFQUFtQkQsRUFBekJFLElBQUFKLEVBQUFLLEtBR0EsT0FWQUMsU0FBUUMsSUFBSUMsR0FVWkEsRUFrREYsUUFBU0MsR0FBVUwsRUFBQUEsR0FHakIsT0FDRUEsSUFBS0MsR0FBUUssRUFBQUEsR0FEUixLQUVMTCxLQUFLRCxHQUFPTSxFQUFRQyxHQUFmLE1BT1QsUUFBU0MsR0FB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QUFNcUQsR0FBU0wsRUFBVXRDLHFCQUdyQixJQUFBLElBQUE0QyxFQUFBQyxPQUFBLENBR0pELEdBQUFBLEdBQUFBLEVBQTJCRSxVQUEzQkQsT0FSTTdDLEVBQUlLLEVBQVEsRUFVZEosRUFBQTZCLEtBQUFDLE1BQUExQixFQUFBLEdBQ0ZzQyxFQUFGTCxFQUFnQnBCLEVBQWhCakIsRUFFRG1DLEdBQUFRLEVBQUFELEVBQUFwRCxJQUFBb0QsRUFBQW5ELE1BOUJMNkIsSUFxQ0F1QixFQUFBMUIsWUFBQSxZQUdBakMsRUFBQSxjQUFBaUMsWUFBQSxXQUNBbkIsSUFBQVEsU0FBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2xvYWRpbmcgSlNcbiQoKCk9PntcblxuICAvL0dMT0JBTCBWQVJJQUJMRVNcbiAgY29uc3Qgd2lkdGggPSA0NjtcbiAgY29uc3QgYm9yZGVyID0gMjtcbiAgY29uc3QgJGJvYXJkID0gJCgnZGl2I2JvYXJkJyk7XG4gIGNvbnN0ICRwaWVjZXMgPSAkKCdkaXYjcGllY2VzJyk7XG4gIGNvbnN0ICRyZXNldEJ1dHRvbiA9ICQoJyNyZXNldC1idXR0b24nKTtcblxuXG5cblxuICAvL0NyZWF0aW5nIHRoZSA2NCBzcXVhcmVzIGFuZCBhZGRpbmcgdGhlbSB0byB0aGUgRE9NXG4gIGNvbnN0IHNxdWFyZUNvdW50ID0gOCo4OyAvLzggcm93cyBieSA4IGNvbHVtbnM7IHplcm8gYmFzZWQgaW5kZXhcbiAgZm9yIChsZXQgaSA9IDA7aTxzcXVhcmVDb3VudDtpKyspIHtcblxuICAvL3RoaXMgbGluZSBjcmVhdGVzIGEgbmV3IGRpdiB3aXRoIHRoZSBjbGFzcyAnc3F1YXJlJ1xuICAvL2FuZCBhcHBlbmRzIGl0IHRvIHRoZSBkaXYgd2l0aCBpZCAnYm9hcmQnXG4gICAgJGJvYXJkLmFwcGVuZCgkKCc8ZGl2Lz4nKS5hZGRDbGFzcygnc3F1YXJlJykpO1xuICB9XG5cblxuICAvL3NldCB1cCB0aGUgYm9hcmQgd2l0aCB0aGUgY29ycmVjdCBjbGFzc2VzIGZvciB0aGUgbGlnaHQgYW5kIGRhcmsgc3F1YXJlc1xuICBzZXRVcEJvYXJkKCk7XG5cblxuICAgICAgLy9jcmVhdGluZyB0aGUgMjQgcGllY2VzIGFuZCBhZGRpbmcgdGhlbSB0byB0aGUgRE9NXG4gIGNvbnN0IHBpZWNlQ291bnQgPSAyNDtcbiAgZm9yIChsZXQgaT0wO2k8cGllY2VDb3VudDtpKyspIHtcblxuICAgIC8vdGhpcyBsaW5lIGFwcGVuZHMgYW4gZW1wdHkgZGl2IHdpdGggdGhlIGNsYXNzICdwaWVjZScgdG8gdGhlIGRpdiB3aXRoIGlkICdwaWVjZXMnXG4gICAgJHBpZWNlcy5hcHBlbmQoJCgnPGRpdi8+JykuYWRkQ2xhc3MoJ3BpZWNlJykpO1xuXG4gIH1cblxuXG4gIC8vc2V0cyB1cCB0aGUgY2xhc3NlcyBmb3IgdGhlIGRpZmZlcmVudCB0eXBlcyBvZiBwaWVjZVxuICBzZXRVcFBpZWNlcygpO1xuXG4gIC8vdGhpcyBsb29wIG1vdmVzIGFsbCB0aGUgbGlnaHQgcGllY2VzIHRvIHRoZWlyIGluaXRpYWwgcG9zaXRpb25zXG4gICQoJ2Rpdi5waWVjZS5saWdodCcpLmVhY2goZnVuY3Rpb24oaW5kZXgscGllY2UpIHtcblxuICAgIC8vdHVybmluZyB0aGUgaW5kZXggKGZyb20gMCAtIDExKVxuICAgIC8vaW50byBhIHgseSBzcXVhcmUgY29vcmRpbmF0ZSB1c2luZyBtYXRoXG4gICAgY29uc3QgeSA9IE1hdGguZmxvb3IoaW5kZXggLyA0KTtcbiAgICBjb25zdCB4ID0gKGluZGV4ICUgNCkgKiAyICsgKDEgLSB5JTIpO1xuXG4gICAgLy90dXJuaW5nIHRoZSB4LHkgY29vcmRpbmdhdGUgaW50byBhIHBpeGVsIHBvc2l0aW9uXG4gICAgY29uc3QgcGl4ZWxQb3NpdGlvbiA9IGdldFBpeGVscyh4LHkpO1xuICAgIC8vYWN0dWFsbHkgbW92aW5nIHRoZSBwaWVjZSB0byBpdHMgaW5pdGlhbCBwb3NpdGlvblxuICAgIG1vdmVQaWVjZVRvKCQocGllY2UpLHBpeGVsUG9zaXRpb24udG9wLHBpeGVsUG9zaXRpb24ubGVmdCk7XG4gIH0pO1xuXG4gICAgLy90aGlzIGxvb3AgbW92ZXMgYWxsIHRoZSBkYXJrIHBpZWNlcyB0byB0aGVpciBpbml0aWFsIHBvc2l0aW9uc1xuICAkKCdkaXYucGllY2UuZGFyaycpLmVhY2goZnVuY3Rpb24oaW5kZXgscGllY2UpIHtcbiAgICAvL3R1cm5pbmcgdGhlIGluZGV4IChmcm9tIDAgLSAxMSlcbiAgICAvL2ludG8gYSB4LHkgc3F1YXJlIGNvb3JkaW5hdGUgdXNpbmcgbWF0aFxuICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKGluZGV4LzQpICsgNTtcbiAgICBjb25zdCB4ID0gKGluZGV4ICUgNCkgKiAyICsgKDEteSUyKTtcblxuICAgIC8vdHVybmluZyB0aGUgeCx5IGNvb3JkaW5hdGUgaW50byBhIHBpeGVsIHBvc2l0aW9uXG4gICAgY29uc3QgcGl4ZWxQb3NpdGlvbiA9IGdldFBpeGVscyh4LHkpO1xuICAgIC8vbW92aW5nIHRoZSBwaWVjZSB0byBpdHMgaW5pdGlhbCBwb3NpdGlvblxuICAgIG1vdmVQaWVjZVRvKCQocGllY2UpLHBpeGVsUG9zaXRpb24udG9wLHBpeGVsUG9zaXRpb24ubGVmdCk7XG4gIH0pO1xuXG4gICAgLy9zZXQgdXAgaW5pdGlhbCBzcXVhcmVzIHRoZSBjbGFzcyAnbW92YWJsZScgcmVwcmVzZW50cyBhIHNxdWFyZVxuICAgIC8vdGhhdCBpcyB1bm9jY3VwaWVkXG4gIGdldE1vdmFibGVTcXVhcmVzKCkuYWRkQ2xhc3MoJ21vdmFibGUnKTtcblxuICAgICAgLy9FVkVOVFNcblxuICAgIC8vcmVzZXR0aW5nIHRoZSBnYW1lLlxuICAkcmVzZXRCdXR0b24ub24oJ2NsaWNrJywgKCk9PntcbiAgICByZXNldCgpO1xuICB9KTtcblxuICAkKCdkaXYucGllY2UnKS5vbignY2xpY2snLChldmVudCk9PntcbiAgICAvL3R1cm4gYHRoaXNgIGludG8gYSBqUXVlcnkgb2JqZWN0XG4gICAgY29uc3QgJHRoaXNQaWVjZSA9ICQoZXZlbnQudGFyZ2V0KTtcbiAgICAvL1RFU1QuIGNoZWNraW5nIHRoZSBwaWVjZSBpbmRleC5cbiAgICBjdXJyZW50UG9zaXRpb24oKTtcbiAgICAvLyBjb25zdCBwb3NpdGlvbiA9ICQoZXZlbnQudGFyZ2V0KS5wb3NpdGlvbigpO1xuICAgIC8vIGNvbnN0IGNvb3JkcyA9IGdldENvb3Jkcyhwb3NpdGlvbi50b3AscG9zaXRpb24ubGVmdCk7XG4gICAgLy8gY29uc29sZS5sb2coY29vcmRzKTsvL2dldHRpbmcgdGhlIGxvY2F0aW9uIG9mIHRoZSBwaWVjZVxuICAgIC8vIGNoZWNrIGlmIGl0J3MgcDEgb3IgcDIgYnkgdGhlIGNvbG9yXG4gICAgaWYgKCR0aGlzUGllY2UuaGFzQ2xhc3MoJ2RhcmsnKSl7XG4gICAgICBjb25zb2xlLmxvZygkdGhpc1BpZWNlKTtcbiAgICB9ZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhgVGhpcyBpcyBhIGxpZ2h0IHBpZWNlYCk7XG4gICAgfVxuXG5cblxuICAgIC8vdG9nZ2xpbmcgdGhlICdzZWxlY3RlZCcgY2xhc3Mgb2YgdGhpcyBwaWVjZVxuICAgIC8vYW5kIHBvc3NpYmxlIGRlc2VsZWN0aW5nIG90aGVyIHBpZWNlc1xuICAgIHRvZ2dsZVNlbGVjdCgkdGhpc1BpZWNlKTtcblxuICB9KTtcblxuICAvL2NoZWNrcyB0aGUgY3VycmVudFBvc2l0aW9uIG9mIHRoZSBjbGlja2VkIG9yIHNlbGVjdGVkIGRpdiBhbmQgcmV0dXJucyB0aGUgY29vcmRzLlxuICBmdW5jdGlvbiBjdXJyZW50UG9zaXRpb24oKXtcbiAgICBjb25zdCBwb3NpdGlvbiA9ICQoZXZlbnQudGFyZ2V0KS5wb3NpdGlvbigpO1xuICAgIGNvbnN0IGNvb3JkcyA9IGdldENvb3Jkcyhwb3NpdGlvbi50b3AscG9zaXRpb24ubGVmdCk7XG4gICAgY29uc29sZS5sb2coY29vcmRzKTsvL2dldHRpbmcgdGhlIGxvY2F0aW9uIG9mIHRoZSBwaWVjZVxuICAgIHJldHVybiBjb29yZHM7XG4gIH1cblxuICAkKCdkaXYuc3F1YXJlJykub24oJ2NsaWNrJywgKGUpPT57XG5cbiAgICAvL3R1cm4gYGUgb3IgZXZlbnRgIGludG8gYSBqUXVlcnkgb2JqZWN0XG4gICAgY29uc3QgJHBpZWNlVG9Nb3ZlID0gJChlLnRhcmdldCk7XG5cblxuICAgIC8vaWYgJHRoaXMgaXMgYSBsZWdhbCBzcXVhcmUgdG8gbW92ZSB0by4uLlxuICAgIGlmICgkcGllY2VUb01vdmUuaGFzQ2xhc3MoJ21vdmFibGUnKSkge1xuXG4gICAgICAgICAgLy9nZXQgdGhlIHBpZWNlIHdpdGggdGhlIGNsYXNzICdzZWxlY3RlZCdcbiAgICAgIGNvbnN0ICRzZWxlY3RlZFBpZWNlID0gJCgnZGl2LnBpZWNlLnNlbGVjdGVkJyk7XG5cbiAgICAgICAgICAvL29ubHkgbW92ZSBpZiB0aGVyZSBpcyBleGFjdGx5IG9uZSBzZWxlY3RlZCBwaWVjZVxuICAgICAgaWYgKCRzZWxlY3RlZFBpZWNlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgLy9nZXQgdGhlIGluZGV4IG9mIHRoZSBzcXVhcmVcbiAgICAgICAgICAgIC8vYW5kIHRyYW5zbGF0ZSBpdCB0byBwaXhlbCBwb3NpdGlvblxuICAgICAgICBjb25zdCBpbmRleCA9ICRwaWVjZVRvTW92ZS5wcmV2QWxsKCkubGVuZ3RoO1xuICAgICAgICBjb25zdCB4ID0gaW5kZXggJSA4O1xuICAgICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihpbmRleCAvIDgpO1xuICAgICAgICBjb25zdCBwaXhlbHMgPSBnZXRQaXhlbHMoeCx5KTtcbiAgICAgICAgICAgIC8vYWN0dWFsbHkgZG8gdGhlIG1vdmluZ1xuICAgICAgICBtb3ZlUGllY2VUbygkc2VsZWN0ZWRQaWVjZSxwaXhlbHMudG9wLHBpeGVscy5sZWZ0KTtcbiAgICAgICAgICAgIC8vaW5jcmVtZW50IHRoZSBtb3ZlIGNvdW50ZXJcbiAgICAgICAgaW5jcmVtZW50bW92ZUNvdW50ZXIoKTtcbiAgICAgICAgICAgIC8vdW4tc2VsZWN0IHRoZSBwaWVjZVxuICAgICAgICAkc2VsZWN0ZWRQaWVjZS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcblxuICAgICAgICAgICAgLy9zZXQgdGhlIG5ldyBsZWdhbCBtb3Zlc1xuICAgICAgICAkKCdkaXYuc3F1YXJlJykucmVtb3ZlQ2xhc3MoJ21vdmFibGUnKTtcbiAgICAgICAgZ2V0TW92YWJsZVNxdWFyZXMoKS5hZGRDbGFzcygnbW92YWJsZScpO1xuICAgICAgfVxuXG4gICAgfVxuXG4gIH0pO1xuXG5cbiAgLy8gTU9SRSBGVU5DVElPTlNcblxuXG4gIC8vZnVuY3Rpb24gZm9yIHRyYW5zbGF0aW5nIGFuIHgseSBjb29yZGluYXRlcyB0byBhIHBpeGVsIHBvc2l0aW9uXG4gIC8vdGhlIGNvbnZlbnRpb24gaXMgdGhhdCB0aGUgc3F1YXJlIGluIHRoZSB1cHBlciBsZWZ0IGNvcm5lciBpcyBhdCBwb3NpdGlvbiAwLDBcbiAgLy90aGUgc3F1YXJlIGluIHRoZSB1cHBlciByaWdodCwgYXQgNywwIGFuZCB0aGUgbG93ZXJcbiAgLy9yaWdodCBhdCA3LDdcbiAgZnVuY3Rpb24gZ2V0UGl4ZWxzKHgseSkge1xuICAgICAgLy90YWtlcyBhbiB4LHkgcG9zaXRpb24sIHJldHVybnNcbiAgICAgIC8vcGl4ZWxzIGZyb20gdGhlIGxlZnQsIHJpZ2h0XG4gICAgcmV0dXJuIHtcbiAgICAgICd0b3AnOiAoeSAqICh3aWR0aCtib3JkZXIpKSsncHgnLFxuICAgICAgJ2xlZnQnOiAoeCAqICh3aWR0aCtib3JkZXIpKSsncHgnXG4gICAgfTtcbiAgfVxuXG4gIC8vZnVuY3Rpb24gZm9yIHR1cm5pbmcgYSBwaXhlbCBwb3NpdGlvblxuICAvL2ludG8gdGhlIHgseSBjb29yZGluYXRlIG9mIGEgc3F1YXJlIG9uIHRoZSBib2FyZFxuICAvL2l0IGZvbGxvd3MgdGhlIHNhbWUgY29vcmRpbmF0ZSBjb252ZW50aW9uIGFzIGdldFBpeGVsc1xuICBmdW5jdGlvbiBnZXRDb29yZHModG9wLGxlZnQpIHtcbiAgICAgIC8vcmV0dXJucyBhbiB4IGFuZCBhIHlcbiAgICAgIC8vZ2l2ZW4gYSB0b3AgYW5kIGxlZnQgcGl4ZWxzXG4gICAgcmV0dXJuIHtcbiAgICAgICd4JzogbGVmdCAvICh3aWR0aCArIGJvcmRlciksXG4gICAgICAneSc6IHRvcCAvICh3aWR0aCArIGJvcmRlcilcbiAgICB9O1xuICB9XG5cbiAgLy91dGlsaXR5IGZ1bmN0aW9uIGZvciByZXR1cm5pbmdcbiAgLy90aGUgc2V0IG9mIHVub2NjdXBpZWQgZGFyayBzcXVhcmVzXG4gIC8vKHBvc3NpYmxlIHBsYWNlcyB0byBtb3ZlIGEgcGllY2UpXG4gIGZ1bmN0aW9uIGdldE1vdmFibGVTcXVhcmVzKCkge1xuICAgICAgLy9zZWxlY3QgYWxsIG9mIHRoZSBzcXVhcmVzXG4gICAgY29uc3QgJHNxdWFyZXMgPSAkKCdkaXYuc3F1YXJlJyk7XG5cbiAgLy9zZWxlY3QgdGhlIG9jY3VwaWVkIG9uZXMgdXNpbmcgdGhlIGpRdWVyeSBtYXAoKSBtZXRob2RcbiAgLy9tYXAgY3JlYXRlcyBhIG5ldyBvYmplY3QgZnJvbSBhbiBleGlzdGluZyBvbmUgdXNpbmcgYSB0cmFuc2xhdGlvbiBmdW5jdGlvblxuICAgIGNvbnN0ICR0YWtlblNxdWFyZXMgPVxuICAgICAgICAgICQoJ2Rpdi5waWVjZScpLm1hcChmdW5jdGlvbihpbmRleCxwaWVjZSkge1xuICAgICAgICAgICAgLy90aGlzIGZ1bmN0aW9uIHRyYW5zbGF0ZXMgYSBwaWVjZVxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSAkKHBpZWNlKS5wb3NpdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgY29vcmRzID0gZ2V0Q29vcmRzKHBvc2l0aW9uLnRvcCxwb3NpdGlvbi5sZWZ0KTtcbiAgICAgICAgICAgIGNvbnN0IHNxdWFyZUluZGV4ID0gY29vcmRzLnkgKiA4ICsgY29vcmRzLng7XG4gICAgICAgICAgICByZXR1cm4gJHNxdWFyZXNbc3F1YXJlSW5kZXhdO1xuICAgICAgICAgIH0pO1xuXG4gICAgY29uc3QgJG91dCA9ICQoJ2Rpdi5zcXVhcmUuZGFyaycpLm5vdCgkdGFrZW5TcXVhcmVzKTtcbiAgICByZXR1cm4gJG91dDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFVwUGllY2VzKCkge1xuICAgICAgLy9zZWxlY3QgYWxsIHRoZSBkaXZzIHdpdGggY2xhc3MgJ3BpZWNlJ1xuICAgICQoJ3BpZWNlJyk7XG4vL2FkZCB0aGUgJ2xpZ2h0JyBjbGFzcyB0byBoYWxmIG9mIHRoZW1cbiAgICAkKCdkaXYucGllY2U6ZXZlbicpLmFkZENsYXNzKCdsaWdodCcpO1xuLy9qUXVlcnkncyBldmVuIGFuZCBvZGQgc2VsZWN0b3IgbWV0aG9kcyB0byBhc3NpZ24gdGhlIGNsYXNzZXMgLmxpZ2h0IGFuZCAuZGFyay5cbi8vYWRkIHRoZSAnZGFyaycgdG8gdGhlIG90aGVyIGhhbGZcbiAgICAkKCdkaXYucGllY2U6b2RkJykuYWRkQ2xhc3MoJ2RhcmsnKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gbW92ZVBpZWNlVG8oJHBpZWNlLG5ld1RvcCxuZXdMZWZ0KSB7XG4gICAgICAvL3NldCB0aGUgY3NzICd0b3AnIGFuZCAnbGVmdCdcbiAgICAgIC8vYXR0cmlidXRlcyBvZiB0aGUgcGFzc2VkIHBpZWNlXG4gICAgICAvL3RvIHRoZSBhcmd1bWVudHMgbmV3VG9wIGFuZCBuZXdMZWZ0XG4gICAgJHBpZWNlLmNzcygndG9wJywgbmV3VG9wKTtcbiAgICAkcGllY2UuY3NzKCdsZWZ0JywgbmV3TGVmdCk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFVwQm9hcmQoKSB7XG4gICAgICAvL2l0ZXJhdGUgdGhyb3VnaCBhbGwgb2YgdGhlIGRpdnMgd2l0aCBjbGFzcyBgc3F1YXJlYFxuICAgICAgLy9maWd1cmUgb3V0IHdoZXRoZXIgZWFjaCBvbmUgc2hvdWxkIGJlXG4gICAgICAvL2xpZ2h0IG9yIGRhcmssIGFuZCBhc3NpZ24gdGhlIHByb3BlciBjbGFzc1xuICAgIGNvbnN0ICRlYWNoU3F1YXJlID0gJCgnZGl2LnNxdWFyZScpO1xuICAgICRlYWNoU3F1YXJlLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgaWYobGlnaHRPckRhcmsoaW5kZXgpPT09IDApe1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdsaWdodCcpO1xuICAgICAgfWVsc2V7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2RhcmsnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICAgIC8vaW5uZXIgaGVscGVyIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBudW1iZXIgYmV0d2VlblxuICAgICAgLy8wIGFuZCA2MyAoaW5jbHVzaXZlKSBhbmQgcmV0dXJucyAxIGlmIHRoZSBzcXVhcmUgc2hvdWxkIGJlXG4gICAgICAvL2RhcmssIGFuZCAwIGlmIHRoZSBzcXVhcmUgc2hvdWxkIGJlIGxpZ2h0XG4gICAgZnVuY3Rpb24gbGlnaHRPckRhcmsoaW5kZXgpIHtcbiAgICAgIGNvbnN0IHggPSBpbmRleCAlIDg7XG4gICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihpbmRleCAvIDgpO1xuICAgICAgY29uc3Qgb2RkWCA9IHggJSAyO1xuICAgICAgY29uc3Qgb2RkWSA9IHkgJSAyO1xuICAgICAgcmV0dXJuIChvZGRYIF4gb2RkWSk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiB0b2dnbGVTZWxlY3QoJHBpZWNlKSB7XG4gICAgICAvL2lmICRwaWVjZSBoYXMgdGhlIGNsYXNzICdzZWxlY3RlZCcscmVtb3ZlIGl0XG4gICAgICAvL2lmICRwaWVjZSBkb2VzIG5vdCBoYXZlIHRoZSBjbGFzcyAnc2VsZWN0ZWQnXG4gICAgICAvL21ha2Ugc3VyZSBubyBvdGhlciBkaXZzIHdpdGggdGhlIGNsYXNzICdwaWVjZSdcbiAgICAgIC8vaGF2ZSB0aGF0IGNsYXNzLCB0aGVuIHNldCAkcGllY2UgdG8gaGF2ZSB0aGUgY2xhc3NcbiAgICBpZigkcGllY2UuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpXG4gICAgICAkcGllY2UucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgZWxzZSB7XG4gICAgICAkKCdkaXYucGllY2UnKS5lYWNoKGZ1bmN0aW9uKGluZGV4LHBpZWNlKSB7XG4gICAgICAgIGlmKCQocGllY2UpLmhhc0NsYXNzKCdzZWxlY3RlZCcpKVxuICAgICAgICAgICQocGllY2UpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgfSk7XG4gICAgICAkcGllY2UuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgfVxuXG4gIH0vL2VuZCBvZiB0b2dnbGVTZWxlY3QgZnVuY3Rpb25cblxuICBmdW5jdGlvbiBpbmNyZW1lbnRtb3ZlQ291bnRlcigpIHtcbiAgICAgIC8vZ2V0cyB0aGUgaHRtbCBvZiB0aGUgc3BhbiB3aXRoIGlkIG1vdmVDb3VudGVyXG4gICAgICAvL3R1cm5zIGl0IGludG8gYSBudW1iZXJcbiAgICAgIC8vaW5jcmVtZW50cyBpdCBieSBvbmVcbiAgICAgIC8vc2V0cyB0aGUgaHRtbCBvZiB0aGUgc3BhbiB3aXRoIGlkIG1vdmVDb3VudGVyXG4gICAgICAvL3RvIHRoZSBuZXcgbW92ZSBjb3VudFxuICAgICQoJyNtb3ZlQ291bnRlcicpLmh0bWwocGFyc2VJbnQoJCgnI21vdmVDb3VudGVyJykuaHRtbCgpLDEwKSsxKTtcbiAgfVxuXG4gIC8vdGhpcyByZXNldHMgdGhlIGdhbWUgYnkgZWZmZWN0aXZlbHkgcmVsb2FkaW5nIHRoZSBwYWdlIGZyb20gY2FjaGVcbiAgZnVuY3Rpb24gcmVzZXQoKXtcbiAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgfVxuXG5cblxuXG59KTsvL2VuZCBvZiBKUyBsb2FkXG5cblxuLypcblRPRE86XG4xLiBQbGF5ZXIgY2hhbmdlIGZyb20gcGxheWVyIDEgdG8gcGxheWVyIDJcbjIuIEZpZ3VyZSBvdXQgaG93IHRvIHN0b3AgaWxsZWdhbCBtb3Zlcy5cbiAgLW9ubHkgbWFrZSB0d28gcG9zdGl0aW9ucyBhdmFpbGFibGUgYXQgYW55IGdpdmVuIHRpbWVcbiAgLW9uY2UgdGhlIHBpZWNlIGhhcyBtb3ZlZCBpbnRvIGEgcG9zaXRpb24gbWFrZVxuXG4gIC1PbiBjbGljayBvZiBzcWF1cmVcbiAgLWdldCBwaWVjZSBvbiBzcWF1cmUgKGUudGFyZ2V0KVxuICAtY2hlY2sgaWYgcGllY2UgYmVsb25ncyB0byBwMSBvciBwMlxuICAtY2hlY2sgcmVsZXZhbnQgc3F1YXJlc1xuICAgIC5pZiBpbmRleCBvZiBjdXJyZW50U3F1YXJlXG4gICAgLmlmIHNxdWFyZSBpcyBub3QgaW4gdGhlIGZpcnN0IGNvbHVtblxuICAgIGNoZWNrIHNxdWFyZSBkaWFnb25hbGx5IGxlZnQgYW5kIG1vdmFibGUgY2xhc3MgaWYgZW1wdHlcbiAgICAuaWYgc3F1YXJlIGlzIG5vdCBpbiB0aGUgbGFzdCBjb2x1bW5cbiAgICBjaGVjayBzcXVhcmUgZGlhZ29uYWxseSByaWdodCBhbmQgbW92YWJsZSBjbGFzcyBpZiBlbXB0eVxuICAtb25jZSBwaWVjZSBpcyBtb3ZlZCBvciBpZiB1bi1zZWxlY3RlZCByZW1vdmUgbW92YWJsZSBjbGFzcyBmcm9tIGFsbCBzcXVhcmVzLlxuXG5pbmRleCAocG9zaXRpb24pJSB3aWR0aCA9PT0gMCAuLi5yZXByZXNlbnRzIHRoZSBmaXJzdCBjb2x1bW5cbmluZGV4ICUgd2lkdGggPT09IHdpZHRoLTEgLi4ucmVwcmVzZW50cyB0aGUgbGFzdCBjb2x1bW5cblxuaW5kZXggKyB3aWR0aC0xIGZvciBwbGF5ZXIxIGlzIGdvaW5nIGxlZnQgZGlhZ29uYWxseVxuaW5kZXggKyB3aWR0aC0xIGZvciBwbGF5ZXIxIGlzIGdvaW5nIHJpZ2h0IGRpYWdvbmFsbHlcblxuaW5kZXggLSB3aWR0aCsxIGZvciBwbGF5ZXIyIGlzIGdvaW5nIGxlZnQgZGlhZ29uYWxseVxuaW5kZXggLSB3aWR0aC0xIGZvciBwbGF5ZXIyIGlzIGdvaW5nIHJpZ2h0IGRpYWdvbmFsbHlcblxuXG4zLiBKdW1wIG1vdmVzIHRvIG1ha2UgdGhlIG9wcG9uZW50cyBwaWVjZSBkaXNhcHBlYXIgZnJvbSB0aGUgYm9hcmQgYW5kIHJlc2V0XG4gIHRoZSBwb3NpdG9uXG40LiBLaW5nIG1ha2VyIGZ1bmN0aW9uXG41LiBIb3cgdG8gdGFrZSBpbiB0aGUgdG9wIHJpZ2h0IHBvc2l0aW9uXG42LlJlc2V0IHRoZSBnYW1lIGJldHRlclxuXG5cbiovXG4iXX0=
