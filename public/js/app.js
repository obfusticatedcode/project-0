"use strict";$(function(){function e(e,t){return{top:t*(d+c)+"px",left:e*(d+c)+"px"}}function t(e,t){return{x:t/(d+c),y:e/(d+c)}}function a(){var e=$("div.square"),a=$("div.piece").map(function(a,i){var s=$(i).position(),o=t(s.top,s.left),n=8*o.y+o.x;return e[n]});return $("div.square.dark").not(a)}function i(e,t,a){e.css("top",t),e.css("left",a)}function s(e){e.hasClass("selected")?e.removeClass("selected"):($("div.piece").each(function(e,t){$(t).hasClass("selected")&&$(t).removeClass("selected")}),e.addClass("selected"))}function o(){$("#moveCounter").html(parseInt($("#moveCounter").html(),10)+1)}function n(){location.reload()}for(var d=46,c=2,l=$("div#board"),r=$("div#pieces"),v=$("#reset-button"),u=0;u<64;u++)l.append($("<div/>").addClass("square"));!function(){function e(e){return e%8%2^Math.floor(e/8)%2}$("div.square").each(function(t){0===e(t)?$(this).addClass("light"):$(this).addClass("dark")})}();for(var f=0;f<24;f++)r.append($("<div/>").addClass("piece"));!function(){$("piece"),$("div.piece:even").addClass("light"),$("div.piece:odd").addClass("dark")}(),$("div.piece.light").each(function(t,a){var s=Math.floor(t/4),o=t%4*2+(1-s%2),n=e(o,s);i($(a),n.top,n.left)}),$("div.piece.dark").each(function(t,a){var s=Math.floor(t/4)+5,o=t%4*2+(1-s%2),n=e(o,s);i($(a),n.top,n.left)}),a().addClass("movable"),v.on("click",function(){n()}),$("div.piece").on("click",function(e){s($(e.target))}),$("div.square").on("click",function(t){var s=$(t.target);if(s.hasClass("movable")){var n=$("div.piece.selected");if(1===n.length){var d=s.prevAll().length,c=d%8,l=Math.floor(d/8),r=e(c,l);i(n,r.top,r.left),o(),n.removeClass("selected"),$("div.square").removeClass("movable"),a().addClass("movable")}}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiZ2V0UGl4ZWxzIiwieCIsInkiLCJ0b3AiLCJ3aWR0aCIsImJvcmRlciIsImxlZnQiLCJnZXRDb29yZHMiLCJnZXRNb3ZhYmxlU3F1YXJlcyIsIiRzcXVhcmVzIiwiJHRha2VuU3F1YXJlcyIsInNldFVwUGllY2VzIiwibWFwIiwiaW5kZXgiLCJwaWVjZSIsInBvc2l0aW9uIiwiY29vcmRzIiwic3F1YXJlSW5kZXgiLCJub3QiLCIkZWFjaFNxdWFyZSIsIiRwaWVjZSIsIm5ld1RvcCIsIm5ld0xlZnQiLCJjc3MiLCJhZGRDbGFzcyIsInRvZ2dsZVNlbGVjdCIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJlYWNoIiwibG9jYXRpb24iLCJyZWxvYWQiLCJpbmNyZW1lbnRtb3ZlQ291bnRlciIsImh0bWwiLCJwYXJzZUludCIsInJlc2V0IiwiJGJvYXJkIiwiaSIsInNxdWFyZUNvdW50IiwiYXBwZW5kIiwib2RkWSIsImxpZ2h0T3JEYXJrIiwidGhpcyIsIiRwaWVjZXMiLCJNYXRoIiwiZmxvb3IiLCJtb3ZlUGllY2VUbyIsInBpeGVsUG9zaXRpb24iLCIkcmVzZXRCdXR0b24iLCJvbiIsImV2ZW50IiwidGFyZ2V0IiwiZSIsIiRwaWVjZVRvTW92ZSIsInBpeGVscyIsIiRzZWxlY3RlZFBpZWNlIiwicHJldkFsbCIsImxlbmd0aCJdLCJtYXBwaW5ncyI6IllBQ0FBLEdBQUUsV0ErSUEsUUFBQUMsR0FBQUMsRUFBQUMsR0FHSSxPQUNGQyxJQUFPRCxHQUFBRSxFQUFBQyxHQUFBLEtBQ0xDLEtBQUtBLEdBQVFGLEVBQUFBLEdBRFIsTUFRVCxRQUFBRyxHQUFBSixFQUFBRyxHQUdFLE9BVkVMLEVBQUtLLEdBQVFGLEVBQVFDLEdBWXpCSCxFQUFBQyxHQUFBQyxFQUFBQyxJQVFVLFFBQUFHLEtBVlIsR0FBTUMsR0FBV1YsRUFBRSxjQUliVyxFQWFSWCxFQUFTWSxhQUFjQyxJQUFBLFNBQUFDLEVBQUFDLEdBRW5CLEdBQUZD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RSxjQUFjNEIsWUFBWSxXQVlsQ25CLElBQUFnQixTQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vbG9hZGluZyBKU1xuJCgoKT0+e1xuXG4gIC8vR0xPQkFMIFZBUklBQkxFU1xuICBjb25zdCB3aWR0aCA9IDQ2O1xuICBjb25zdCBib3JkZXIgPSAyO1xuICBjb25zdCAkYm9hcmQgPSAkKCdkaXYjYm9hcmQnKTtcbiAgY29uc3QgJHBpZWNlcyA9ICQoJ2RpdiNwaWVjZXMnKTtcbiAgY29uc3QgJHJlc2V0QnV0dG9uID0gJCgnI3Jlc2V0LWJ1dHRvbicpO1xuXG5cblxuXG4gIC8vQ3JlYXRpbmcgdGhlIDY0IHNxdWFyZXMgYW5kIGFkZGluZyB0aGVtIHRvIHRoZSBET01cbiAgY29uc3Qgc3F1YXJlQ291bnQgPSA4Kjg7IC8vOCByb3dzIGJ5IDggY29sdW1uczsgemVybyBiYXNlZCBpbmRleFxuICBmb3IgKGxldCBpID0gMDtpPHNxdWFyZUNvdW50O2krKykge1xuXG4gIC8vdGhpcyBsaW5lIGNyZWF0ZXMgYSBuZXcgZGl2IHdpdGggdGhlIGNsYXNzICdzcXVhcmUnXG4gIC8vYW5kIGFwcGVuZHMgaXQgdG8gdGhlIGRpdiB3aXRoIGlkICdib2FyZCdcbiAgICAkYm9hcmQuYXBwZW5kKCQoJzxkaXYvPicpLmFkZENsYXNzKCdzcXVhcmUnKSk7XG4gIH1cblxuXG4gIC8vc2V0IHVwIHRoZSBib2FyZCB3aXRoIHRoZSBjb3JyZWN0IGNsYXNzZXMgZm9yIHRoZSBsaWdodCBhbmQgZGFyayBzcXVhcmVzXG4gIHNldFVwQm9hcmQoKTtcblxuXG4gICAgICAvL2NyZWF0aW5nIHRoZSAyNCBwaWVjZXMgYW5kIGFkZGluZyB0aGVtIHRvIHRoZSBET01cbiAgY29uc3QgcGllY2VDb3VudCA9IDI0O1xuICBmb3IgKGxldCBpPTA7aTxwaWVjZUNvdW50O2krKykge1xuXG4gICAgLy90aGlzIGxpbmUgYXBwZW5kcyBhbiBlbXB0eSBkaXYgd2l0aCB0aGUgY2xhc3MgJ3BpZWNlJyB0byB0aGUgZGl2IHdpdGggaWQgJ3BpZWNlcydcbiAgICAkcGllY2VzLmFwcGVuZCgkKCc8ZGl2Lz4nKS5hZGRDbGFzcygncGllY2UnKSk7XG5cbiAgfVxuXG5cbiAgLy9zZXRzIHVwIHRoZSBjbGFzc2VzIGZvciB0aGUgZGlmZmVyZW50IHR5cGVzIG9mIHBpZWNlXG4gIHNldFVwUGllY2VzKCk7XG5cbiAgLy90aGlzIGxvb3AgbW92ZXMgYWxsIHRoZSBsaWdodCBwaWVjZXMgdG8gdGhlaXIgaW5pdGlhbCBwb3NpdGlvbnNcbiAgJCgnZGl2LnBpZWNlLmxpZ2h0JykuZWFjaChmdW5jdGlvbihpbmRleCxwaWVjZSkge1xuXG4gICAgLy90dXJuaW5nIHRoZSBpbmRleCAoZnJvbSAwIC0gMTEpXG4gICAgLy9pbnRvIGEgeCx5IHNxdWFyZSBjb29yZGluYXRlIHVzaW5nIG1hdGhcbiAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihpbmRleCAvIDQpO1xuICAgIGNvbnN0IHggPSAoaW5kZXggJSA0KSAqIDIgKyAoMSAtIHklMik7XG5cbiAgICAvL3R1cm5pbmcgdGhlIHgseSBjb29yZGluZ2F0ZSBpbnRvIGEgcGl4ZWwgcG9zaXRpb25cbiAgICBjb25zdCBwaXhlbFBvc2l0aW9uID0gZ2V0UGl4ZWxzKHgseSk7XG4gICAgLy9hY3R1YWxseSBtb3ZpbmcgdGhlIHBpZWNlIHRvIGl0cyBpbml0aWFsIHBvc2l0aW9uXG4gICAgbW92ZVBpZWNlVG8oJChwaWVjZSkscGl4ZWxQb3NpdGlvbi50b3AscGl4ZWxQb3NpdGlvbi5sZWZ0KTtcbiAgfSk7XG5cbiAgICAvL3RoaXMgbG9vcCBtb3ZlcyBhbGwgdGhlIGRhcmsgcGllY2VzIHRvIHRoZWlyIGluaXRpYWwgcG9zaXRpb25zXG4gICQoJ2Rpdi5waWVjZS5kYXJrJykuZWFjaChmdW5jdGlvbihpbmRleCxwaWVjZSkge1xuICAgIC8vdHVybmluZyB0aGUgaW5kZXggKGZyb20gMCAtIDExKVxuICAgIC8vaW50byBhIHgseSBzcXVhcmUgY29vcmRpbmF0ZSB1c2luZyBtYXRoXG4gICAgY29uc3QgeSA9IE1hdGguZmxvb3IoaW5kZXgvNCkgKyA1O1xuICAgIGNvbnN0IHggPSAoaW5kZXggJSA0KSAqIDIgKyAoMS15JTIpO1xuXG4gICAgLy90dXJuaW5nIHRoZSB4LHkgY29vcmRpbmF0ZSBpbnRvIGEgcGl4ZWwgcG9zaXRpb25cbiAgICBjb25zdCBwaXhlbFBvc2l0aW9uID0gZ2V0UGl4ZWxzKHgseSk7XG4gICAgLy9tb3ZpbmcgdGhlIHBpZWNlIHRvIGl0cyBpbml0aWFsIHBvc2l0aW9uXG4gICAgbW92ZVBpZWNlVG8oJChwaWVjZSkscGl4ZWxQb3NpdGlvbi50b3AscGl4ZWxQb3NpdGlvbi5sZWZ0KTtcbiAgfSk7XG5cbiAgICAvL3NldCB1cCBpbml0aWFsIHNxdWFyZXMgdGhlIGNsYXNzICdtb3ZhYmxlJyByZXByZXNlbnRzIGEgc3F1YXJlXG4gICAgLy90aGF0IGlzIHVub2NjdXBpZWRcbiAgZ2V0TW92YWJsZVNxdWFyZXMoKS5hZGRDbGFzcygnbW92YWJsZScpO1xuXG4gICAgICAvL0VWRU5UU1xuXG4gICAgLy9yZXNldHRpbmcgdGhlIGdhbWUuXG4gICRyZXNldEJ1dHRvbi5vbignY2xpY2snLCAoKT0+e1xuICAgIHJlc2V0KCk7XG4gIH0pO1xuXG4gICQoJ2Rpdi5waWVjZScpLm9uKCdjbGljaycsKGV2ZW50KT0+e1xuICAgIC8vdHVybiBgdGhpc2AgaW50byBhIGpRdWVyeSBvYmplY3RcbiAgICBjb25zdCAkdGhpc1BpZWNlID0gJChldmVudC50YXJnZXQpO1xuXG4gICAgLy90b2dnbGVpbmcgdGhlICdzZWxlY3RlZCcgY2xhc3Mgb2YgdGhpcyBwaWVjZVxuICAgIC8vYW5kIHBvc3NpYmxlIGRlc2VsZWN0aW5nIG90aGVyIHBpZWNlc1xuICAgIHRvZ2dsZVNlbGVjdCgkdGhpc1BpZWNlKTtcblxuICB9KTtcblxuXG5cbiAgJCgnZGl2LnNxdWFyZScpLm9uKCdjbGljaycsIChlKT0+e1xuXG4gICAgLy90dXJuIGBlIG9yIGV2ZW50YCBpbnRvIGEgalF1ZXJ5IG9iamVjdFxuICAgIGNvbnN0ICRwaWVjZVRvTW92ZSA9ICQoZS50YXJnZXQpO1xuXG4gICAgLy9pZiAkdGhpcyBpcyBhIGxlZ2FsIHNxdWFyZSB0byBtb3ZlIHRvLi4uXG4gICAgaWYgKCRwaWVjZVRvTW92ZS5oYXNDbGFzcygnbW92YWJsZScpKSB7XG5cbiAgICAgICAgICAvL2dldCB0aGUgcGllY2Ugd2l0aCB0aGUgY2xhc3MgJ3NlbGVjdGVkJ1xuICAgICAgY29uc3QgJHNlbGVjdGVkUGllY2UgPSAkKCdkaXYucGllY2Uuc2VsZWN0ZWQnKTtcblxuICAgICAgICAgIC8vb25seSBtb3ZlIGlmIHRoZXJlIGlzIGV4YWN0bHkgb25lIHNlbGVjdGVkIHBpZWNlXG4gICAgICBpZiAoJHNlbGVjdGVkUGllY2UubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvL2dldCB0aGUgaW5kZXggb2YgdGhlIHNxdWFyZVxuICAgICAgICAgICAgLy9hbmQgdHJhbnNsYXRlIGl0IHRvIHBpeGVsIHBvc2l0aW9uXG4gICAgICAgIGNvbnN0IGluZGV4ID0gJHBpZWNlVG9Nb3ZlLnByZXZBbGwoKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIDg7XG4gICAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKGluZGV4IC8gOCk7XG4gICAgICAgIGNvbnN0IHBpeGVscyA9IGdldFBpeGVscyh4LHkpO1xuICAgICAgICAgICAgLy9hY3R1YWxseSBkbyB0aGUgbW92aW5nXG4gICAgICAgIG1vdmVQaWVjZVRvKCRzZWxlY3RlZFBpZWNlLHBpeGVscy50b3AscGl4ZWxzLmxlZnQpO1xuICAgICAgICAgICAgLy9pbmNyZW1lbnQgdGhlIG1vdmUgY291bnRlclxuICAgICAgICBpbmNyZW1lbnRtb3ZlQ291bnRlcigpO1xuICAgICAgICAgICAgLy91bi1zZWxlY3QgdGhlIHBpZWNlXG4gICAgICAgICRzZWxlY3RlZFBpZWNlLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuXG4gICAgICAgICAgICAvL3NldCB0aGUgbmV3IGxlZ2FsIG1vdmVzXG4gICAgICAgICQoJ2Rpdi5zcXVhcmUnKS5yZW1vdmVDbGFzcygnbW92YWJsZScpO1xuICAgICAgICBnZXRNb3ZhYmxlU3F1YXJlcygpLmFkZENsYXNzKCdtb3ZhYmxlJyk7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgfSk7XG5cblxuICAvLyBNT1JFIEZVTkNUSU9OU1xuXG5cbiAgLy9mdW5jdGlvbiBmb3IgdHJhbnNsYXRpbmcgYW4geCx5IGNvb3JkaW5hdGVzIHRvIGEgcGl4ZWwgcG9zaXRpb25cbiAgLy90aGUgY29udmVudGlvbiBpcyB0aGF0IHRoZSBzcXVhcmUgaW4gdGhlIHVwcGVyIGxlZnQgY29ybmVyIGlzIGF0IHBvc2l0aW9uIDAsMFxuICAvL3RoZSBzcXVhcmUgaW4gdGhlIHVwcGVyIHJpZ2h0LCBhdCA3LDAgYW5kIHRoZSBsb3dlclxuICAvL3JpZ2h0IGF0IDcsN1xuICBmdW5jdGlvbiBnZXRQaXhlbHMoeCx5KSB7XG4gICAgICAvL3Rha2VzIGFuIHgseSBwb3NpdGlvbiwgcmV0dXJuc1xuICAgICAgLy9waXhlbHMgZnJvbSB0aGUgbGVmdCwgcmlnaHRcbiAgICByZXR1cm4ge1xuICAgICAgJ3RvcCc6ICh5ICogKHdpZHRoK2JvcmRlcikpKydweCcsXG4gICAgICAnbGVmdCc6ICh4ICogKHdpZHRoK2JvcmRlcikpKydweCdcbiAgICB9O1xuICB9XG5cbiAgLy9mdW5jdGlvbiBmb3IgdHVybmluZyBhIHBpeGVsIHBvc2l0aW9uXG4gIC8vaW50byB0aGUgeCx5IGNvb3JkaW5hdGUgb2YgYSBzcXVhcmUgb24gdGhlIGJvYXJkXG4gIC8vaXQgZm9sbG93cyB0aGUgc2FtZSBjb29yZGluYXRlIGNvbnZlbnRpb24gYXMgZ2V0UGl4ZWxzXG4gIGZ1bmN0aW9uIGdldENvb3Jkcyh0b3AsbGVmdCkge1xuICAgICAgLy9yZXR1cm5zIGFuIHggYW5kIGEgeVxuICAgICAgLy9naXZlbiBhIHRvcCBhbmQgbGVmdCBwaXhlbHNcbiAgICByZXR1cm4ge1xuICAgICAgJ3gnOiBsZWZ0IC8gKHdpZHRoICsgYm9yZGVyKSxcbiAgICAgICd5JzogdG9wIC8gKHdpZHRoICsgYm9yZGVyKVxuICAgIH07XG4gIH1cblxuICAvL3V0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHVybmluZ1xuICAvL3RoZSBzZXQgb2YgdW5vY2N1cGllZCBkYXJrIHNxdWFyZXNcbiAgLy8ocG9zc2libGUgcGxhY2VzIHRvIG1vdmUgYSBwaWVjZSlcbiAgZnVuY3Rpb24gZ2V0TW92YWJsZVNxdWFyZXMoKSB7XG4gICAgICAvL3NlbGVjdCBhbGwgb2YgdGhlIHNxdWFyZXNcbiAgICBjb25zdCAkc3F1YXJlcyA9ICQoJ2Rpdi5zcXVhcmUnKTtcblxuICAvL3NlbGVjdCB0aGUgb2NjdXBpZWQgb25lcyB1c2luZyB0aGUgalF1ZXJ5IG1hcCgpIG1ldGhvZFxuICAvL21hcCBjcmVhdGVzIGEgbmV3IG9iamVjdCBmcm9tIGFuIGV4aXN0aW5nIG9uZSB1c2luZyBhIHRyYW5zbGF0aW9uIGZ1bmN0aW9uXG4gICAgY29uc3QgJHRha2VuU3F1YXJlcyA9XG4gICAgICAgICAgJCgnZGl2LnBpZWNlJykubWFwKGZ1bmN0aW9uKGluZGV4LHBpZWNlKSB7XG4gICAgICAgICAgICAvL3RoaXMgZnVuY3Rpb24gdHJhbnNsYXRlcyBhIHBpZWNlXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9ICQocGllY2UpLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBjb29yZHMgPSBnZXRDb29yZHMocG9zaXRpb24udG9wLHBvc2l0aW9uLmxlZnQpO1xuICAgICAgICAgICAgY29uc3Qgc3F1YXJlSW5kZXggPSBjb29yZHMueSAqIDggKyBjb29yZHMueDtcbiAgICAgICAgICAgIHJldHVybiAkc3F1YXJlc1tzcXVhcmVJbmRleF07XG4gICAgICAgICAgfSk7XG5cbiAgICBjb25zdCAkb3V0ID0gJCgnZGl2LnNxdWFyZS5kYXJrJykubm90KCR0YWtlblNxdWFyZXMpO1xuICAgIHJldHVybiAkb3V0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0VXBQaWVjZXMoKSB7XG4gICAgICAvL3NlbGVjdCBhbGwgdGhlIGRpdnMgd2l0aCBjbGFzcyAncGllY2UnXG4gICAgJCgncGllY2UnKTtcbi8vYWRkIHRoZSAnbGlnaHQnIGNsYXNzIHRvIGhhbGYgb2YgdGhlbVxuICAgICQoJ2Rpdi5waWVjZTpldmVuJykuYWRkQ2xhc3MoJ2xpZ2h0Jyk7XG4vL2pRdWVyeSdzIGV2ZW4gYW5kIG9kZCBzZWxlY3RvciBtZXRob2RzIHRvIGFzc2lnbiB0aGUgY2xhc3NlcyAubGlnaHQgYW5kIC5kYXJrLlxuLy9hZGQgdGhlICdkYXJrJyB0byB0aGUgb3RoZXIgaGFsZlxuICAgICQoJ2Rpdi5waWVjZTpvZGQnKS5hZGRDbGFzcygnZGFyaycpO1xuXG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlUGllY2VUbygkcGllY2UsbmV3VG9wLG5ld0xlZnQpIHtcbiAgICAgIC8vc2V0IHRoZSBjc3MgJ3RvcCcgYW5kICdsZWZ0J1xuICAgICAgLy9hdHRyaWJ1dGVzIG9mIHRoZSBwYXNzZWQgcGllY2VcbiAgICAgIC8vdG8gdGhlIGFyZ3VtZW50cyBuZXdUb3AgYW5kIG5ld0xlZnRcbiAgICAkcGllY2UuY3NzKCd0b3AnLCBuZXdUb3ApO1xuICAgICRwaWVjZS5jc3MoJ2xlZnQnLCBuZXdMZWZ0KTtcblxuICB9XG5cbiAgZnVuY3Rpb24gc2V0VXBCb2FyZCgpIHtcbiAgICAgIC8vaXRlcmF0ZSB0aHJvdWdoIGFsbCBvZiB0aGUgZGl2cyB3aXRoIGNsYXNzIGBzcXVhcmVgXG4gICAgICAvL2ZpZ3VyZSBvdXQgd2hldGhlciBlYWNoIG9uZSBzaG91bGQgYmVcbiAgICAgIC8vbGlnaHQgb3IgZGFyaywgYW5kIGFzc2lnbiB0aGUgcHJvcGVyIGNsYXNzXG4gICAgY29uc3QgJGVhY2hTcXVhcmUgPSAkKCdkaXYuc3F1YXJlJyk7XG4gICAgJGVhY2hTcXVhcmUuZWFjaChmdW5jdGlvbihpbmRleCl7XG4gICAgICBpZihsaWdodE9yRGFyayhpbmRleCk9PT0gMCl7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2xpZ2h0Jyk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnZGFyaycpO1xuICAgICAgfVxuICAgIH0pO1xuICAgICAgLy9pbm5lciBoZWxwZXIgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIG51bWJlciBiZXR3ZWVuXG4gICAgICAvLzAgYW5kIDYzIChpbmNsdXNpdmUpIGFuZCByZXR1cm5zIDEgaWYgdGhlIHNxdWFyZSBzaG91bGQgYmVcbiAgICAgIC8vZGFyaywgYW5kIDAgaWYgdGhlIHNxdWFyZSBzaG91bGQgYmUgbGlnaHRcbiAgICBmdW5jdGlvbiBsaWdodE9yRGFyayhpbmRleCkge1xuICAgICAgY29uc3QgeCA9IGluZGV4ICUgODtcbiAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKGluZGV4IC8gOCk7XG4gICAgICBjb25zdCBvZGRYID0geCAlIDI7XG4gICAgICBjb25zdCBvZGRZID0geSAlIDI7XG4gICAgICByZXR1cm4gKG9kZFggXiBvZGRZKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZVNlbGVjdCgkcGllY2UpIHtcbiAgICAgIC8vaWYgJHBpZWNlIGhhcyB0aGUgY2xhc3MgJ3NlbGVjdGVkJyxyZW1vdmUgaXRcbiAgICAgIC8vaWYgJHBpZWNlIGRvZXMgbm90IGhhdmUgdGhlIGNsYXNzICdzZWxlY3RlZCdcbiAgICAgIC8vbWFrZSBzdXJlIG5vIG90aGVyIGRpdnMgd2l0aCB0aGUgY2xhc3MgJ3BpZWNlJ1xuICAgICAgLy9oYXZlIHRoYXQgY2xhc3MsIHRoZW4gc2V0ICRwaWVjZSB0byBoYXZlIHRoZSBjbGFzc1xuICAgIGlmKCRwaWVjZS5oYXNDbGFzcygnc2VsZWN0ZWQnKSlcbiAgICAgICRwaWVjZS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICBlbHNlIHtcbiAgICAgICQoJ2Rpdi5waWVjZScpLmVhY2goZnVuY3Rpb24oaW5kZXgscGllY2UpIHtcbiAgICAgICAgaWYoJChwaWVjZSkuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpXG4gICAgICAgICAgJChwaWVjZSkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICB9KTtcbiAgICAgICRwaWVjZS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICB9XG5cbiAgfS8vZW5kIG9mIHRvZ2dsZVNlbGVjdCBmdW5jdGlvblxuXG4gIGZ1bmN0aW9uIGluY3JlbWVudG1vdmVDb3VudGVyKCkge1xuICAgICAgLy9nZXRzIHRoZSBodG1sIG9mIHRoZSBzcGFuIHdpdGggaWQgbW92ZUNvdW50ZXJcbiAgICAgIC8vdHVybnMgaXQgaW50byBhIG51bWJlclxuICAgICAgLy9pbmNyZW1lbnRzIGl0IGJ5IG9uZVxuICAgICAgLy9zZXRzIHRoZSBodG1sIG9mIHRoZSBzcGFuIHdpdGggaWQgbW92ZUNvdW50ZXJcbiAgICAgIC8vdG8gdGhlIG5ldyBtb3ZlIGNvdW50XG4gICAgJCgnI21vdmVDb3VudGVyJykuaHRtbChwYXJzZUludCgkKCcjbW92ZUNvdW50ZXInKS5odG1sKCksMTApKzEpO1xuICB9XG5cbiAgLy90aGlzIHJlc2V0cyB0aGUgZ2FtZSBieSBlZmZlY3RpdmVseSByZWxvYWRpbmcgdGhlIHBhZ2UgZnJvbSBjYWNoZVxuICBmdW5jdGlvbiByZXNldCgpe1xuICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICB9XG5cblxufSk7Ly9lbmQgb2YgSlMgbG9hZFxuXG5cbi8qXG5UT0RPOlxuMS4gUGxheWVyIGNoYW5nZSBmcm9tIHBsYXllciAxIHRvIHBsYXllciAyXG4yLiBGaWd1cmUgb3V0IGhvdyB0byBzdG9wIGlsbGVnYWwgbW92ZXMuXG4gIC1vbmx5IG1ha2UgdHdvIHBvc3RpdGlvbnMgYXZhaWxhYmxlIGF0IGFueSBnaXZlbiB0aW1lXG4gIC1vbmNlIHRoZSBwaWVjZSBoYXMgbW92ZWQgaW50byBhIHBvc2l0aW9uIG1ha2VcbjMuIEp1bXAgbW92ZXMgdG8gbWFrZSB0aGUgb3Bwb25lbnRzIHBpZWNlIGRpc2FwcGVhciBmcm9tIHRoZSBib2FyZCBhbmQgcmVzZXRcbiAgdGhlIHBvc2l0b25cbjQuIEtpbmcgbWFrZXIgZnVuY3Rpb25cbjUuIEhvdyB0byB0YWtlIGluIHRoZSB0b3AgcmlnaHQgcG9zaXRpb25cbjYuUmVzZXQgdGhlIGdhbWUgYmV0dGVyXG5cblxuKi9cbiJdfQ==
