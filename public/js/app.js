"use strict";$(function(){function e(e,a){return{top:a*(o+n)+"px",left:e*(o+n)+"px"}}function a(e,a){return{x:a/(o+n),y:e/(o+n)}}function t(){var e=$("div.square"),t=$("div.piece").map(function(t,s){var i=$(s).position(),d=a(i.top,i.left),o=8*d.y+d.x;return e[o]});return $("div.square.dark").not(t)}function s(e,a,t){e.css("top",a),e.css("left",t)}function i(e){e.hasClass("selected")?e.removeClass("selected"):($("div.piece").each(function(e,a){$(a).hasClass("selected")&&$(a).removeClass("selected")}),e.addClass("selected"))}function d(){$("#moveCounter").html(parseInt($("#moveCounter").html(),10)+1)}for(var o=46,n=2,l=$("div#board"),c=$("div#pieces"),r=0;r<64;r++)l.append($("<div/>").addClass("square"));!function(){function e(e){return e%8%2^Math.floor(e/8)%2}$("div.square").each(function(a){0===e(a)?$(this).addClass("light"):$(this).addClass("dark")})}();for(var v=0;v<24;v++)c.append($("<div/>").addClass("piece"));!function(){$("piece"),$("div.piece:even").addClass("light"),$("div.piece:odd").addClass("dark")}(),$("div.piece.light").each(function(a,t){var i=Math.floor(a/4),d=a%4*2+(1-i%2),o=e(d,i);s($(t),o.top,o.left)}),$("div.piece.dark").each(function(a,t){var i=Math.floor(a/4)+5,d=a%4*2+(1-i%2),o=e(d,i);s($(t),o.top,o.left)}),t().addClass("movable"),$("div.piece").click(function(){i($(this))}),$("div.square").click(function(){var a=$(this);if(a.hasClass("movable")){var i=$("div.piece.selected");if(1===i.length){var o=a.prevAll().length,n=o%8,l=Math.floor(o/8),c=e(n,l);s(i,c.top,c.left),d(),i.removeClass("selected"),$("div.square").removeClass("movable"),t().addClass("movable")}}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiZ2V0UGl4ZWxzIiwieCIsInkiLCJ0b3AiLCJ3aWR0aCIsImJvcmRlciIsImxlZnQiLCJnZXRDb29yZHMiLCJnZXRNb3ZhYmxlU3F1YXJlcyIsIiRzcXVhcmVzIiwiJHRha2VuU3F1YXJlcyIsIm1hcCIsImluZGV4IiwicGllY2UiLCJwb3NpdGlvbiIsImNvb3JkcyIsInNxdWFyZUluZGV4Iiwibm90IiwibW92ZVBpZWNlVG8iLCIkcGllY2UiLCJuZXdUb3AiLCJuZXdMZWZ0IiwiJGVhY2hTcXVhcmUiLCJsaWdodE9yRGFyayIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJlYWNoIiwicGFyc2VJbnQiLCJhZGRDbGFzcyIsImluY3JlbWVudG1vdmVDb3VudGVyIiwiaHRtbCIsImkiLCJzcXVhcmVDb3VudCIsIiRib2FyZCIsImFwcGVuZCIsIk1hdGgiLCJmbG9vciIsIm9kZFkiLCIkcGllY2VzIiwicGl4ZWxQb3NpdGlvbiIsInRvZ2dsZVNlbGVjdCIsIiR0aGlzIiwidGhpcyIsImNsaWNrIiwiJHNlbGVjdGVkUGllY2UiLCJwaXhlbHMiXSwibWFwcGluZ3MiOiJZQUNBQSxHQUFFLFdBVUEsUUFBQUMsR0FBQUMsRUFBQUMsR0FHSSxPQUNBQyxJQUFBRCxHQUFBRSxFQUFBQyxHQUFBLEtBQ0ZDLEtBQU9MLEdBQUFHLEVBQUFDLEdBQUEsTUFPVCxRQUFBRSxHQUFBSixFQUFBRyxHQUdJLE9BQ0FMLEVBQUFLLEdBQUFGLEVBQUFDLEdBQ0ZILEVBQU9DLEdBQUFDLEVBQUFDLElBT1QsUUFBQUcsS0FFQSxHQUFBQyxHQUFTRCxFQUFBQSxjQUlURSxFQUNBWCxFQUFBLGFBQUFZLElBQUEsU0FBQUMsRUFBQUMsR0FHVSxHQUFBQyxHQUFBZixFQUFBYyxHQUFBQyxXQUNNQSxFQUFhRCxFQUFPQyxFQUExQlgsSUFBQVcsRUFBQVIsTUFDTVMsRUFBZ0NELEVBQWJBLEVBQVNYLEVBQUlXLEVBQVNSLENBQ3pDVSxPQUFBQSxHQUFjRCxJQUk1QixPQUFhaEIsR0FBRSxtQkFBbUJrQixJQUFJUCxHQXNJcEMsUUFBQVEsR0FBQUMsRUFBQUMsRUFBQUMsR0FJRkMsRUFBQUEsSUFBQUEsTUFBaUJGLEdBQ2ZELEVBQUdJLElBQUFBLE9BQVlYLEdBaUNmTyxRQUFBQSxHQUFnQkEsR0FRaEJBLEVBQUFLLFNBQUEsWUFDQUwsRUFBQU0sWUFBQSxhQUVBMUIsRUFBQSxhQUFGMkIsS0FBQSxTQUF1QkMsRUFBV2QsR0FDbkNkLEVBQUFjLEdBQUFXLFNBQUEsYUFHQXpCLEVBQUFjLEdBQUFZLFlBQUEsY0FmR04sRUFBT1MsU0FBUyxhQUtwQixRQUFTQyxLQU1QOUIsRUFBRSxnQkFBZ0IrQixLQUFLSCxTQUFTNUIsRUFBRSxnQkFBZ0IrQixPQUFPLElBQUksR0EvSy9ELElBQUssR0F4REMxQixHQUFRLEdBRGRDLEVBQUEsRUFDTUQsRUFBTkwsRUFBQSxhQUNNTSxFQUFOTixFQUFBLGNBdURTZ0MsRUFBSSxFQUFFQSxFQUFFQyxHQUFZRCxJQUs1QkUsRUFBQUMsT0FBQW5DLEVBQUEsVUFBQTZCLFNBQUEsWUFrSUksV0FnQkQsUUFBQUwsR0FBQVgsR0FLQSxNQUpBQSxHQUFBLEVBRUEsRUFaVXVCLEtBQUtDLE1BQU14QixFQUFRLEdBYTdCLEVBaEJBYixFQUFBLGNBQ093QixLQUFBQSxTQUFUWCxHQUNFLElBQUFXLEVBQVVYLEdBQ1ZiLEVBQU1HLE1BQUlpQyxTQUFXdkIsU0FFckJiLEVBQU1zQyxNQUFBQSxTQUFOLFlBOUhGLEtBQUEsR0FBQU4sR0FBQSxFQUFBQSxFQURBLEdBQ0FBLElBTUVPLEVBQUFKLE9BQUFuQyxFQUFBLFVBQUE2QixTQUFBLFdBMEZILFdBRUQ3QixFQUFBLFNBRUlBLEVBQUEsa0JBQUE2QixTQUFBLFNBR2lCUCxFQUFBQSxpQkFBbkJPLFNBQUEsV0F4RkE3QixFQUFBLG1CQUFVMkIsS0FBQSxTQUF5QmQsRUFBbkNDLEdBSU0sR0FBQVgsR0FBQWlDLEtBQUFDLE1BQUF4QixFQUFBLEdBQ05NLEVBQUFBLEVBQVksRUFBU3FCLEdBQUFBLEVBQUFBLEVBQUFBLEdBR25CQSxFQUFBdkMsRUFBQUMsRUFBQUMsRUFFSWdCLEdBQUFuQixFQUFBYyxHQUFBMEIsRUFBQXBDLElBQUFvQyxFQUFBakMsUUFEUlAsRUFBRSxrQkFBa0IyQixLQUFLLFNBQVNkLEVBQU1DLEdBUWhDLEdBQUFYLEdBQUFpQyxLQUFBQyxNQUFBeEIsRUFBQSxHQUFBLEVBQ05NLEVBQUFBLEVBQVksRUFBU3FCLEdBQUFBLEVBQUFBLEVBQUFBLEdBR25CQSxFQUFBdkMsRUFBQUMsRUFBQUMsRUFFQWdCLEdBQUFuQixFQUFBYyxHQUFBMEIsRUFBQXBDLElBQUFvQyxFQUFBakMsUUFNRkUsSUFBY29CLFNBQWQsV0FHQVksRUFBQUEsYUFBYUMsTUFBYixXQUtBRCxFQVJjekMsRUFBRTJDLFNBV2hCM0MsRUFBQSxjQUFBNEMsTUFBQSxXQUdFLEdBQUFGLEdBQUExQyxFQUFBMkMsS0FHQSxJQUFBRCxFQUFBakIsU0FBQSxXQUFBLENBR0UsR0FBQW9CLEdBQUE3QyxFQUFBLHFCQUdBLElBQVUsSUFBVjZDLEVBQWVSLE9BQWYsQ0FHQWxCLEdBQUFBLEdBQVkwQixFQUFBQSxVQUFlQyxPQUMzQjVDLEVBQUFXLEVBQUEsRUFDQWlCLEVBQUFBLEtBQUFBLE1BQUFBLEVBQUFBLEdBQ0FnQixFQUFBN0MsRUFBQUMsRUFBQUMsRUFIQWdCLEdBQVkwQixFQUFlQyxFQUFPMUMsSUFBSTBDLEVBQU92QyxNQU83Q1AsSUFFRDZDLEVBQUFuQixZQUFBLFlBRkMxQixFQUFFLGNBQWMwQixZQUFZLFdBU2xDakIsSUFBQW9CLFNBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9sb2FkaW5nIEpTXG4kKCgpPT57XG5cbiAgLy9HTE9CQUwgVkFSSUFCTEVTXG4gIGNvbnN0IHdpZHRoID0gNDY7XG4gIGNvbnN0IGJvcmRlciA9IDI7XG4gIGNvbnN0ICRib2FyZCA9ICQoJ2RpdiNib2FyZCcpO1xuICBjb25zdCAkcGllY2VzID0gJCgnZGl2I3BpZWNlcycpO1xuXG4gIC8vZnVuY3Rpb24gZm9yIHRyYW5zbGF0aW5nIGFuIHgseSBjb29yZGluYXQgdG8gYSBwaXhlbCBwb3NpdGlvblxuICAvL3RoZSBjb252ZW50aW9uIGlzIHRoYXQgdGhlIHNxdWFyZSBpbiB0aGUgdXBwZXIgbGVmdCBjb3JuZXIgaXMgYXQgcG9zaXRpb24gMCwwXG4gIC8vdGhlIHNxdWFyZSBpbiB0aGUgdXBwZXIgcmlnaHQsIGF0IDcsMCBhbmQgdGhlIGxvd2VyXG4gIC8vcmlnaHQgYXQgNyw3XG4gIGZ1bmN0aW9uIGdldFBpeGVscyh4LHkpIHtcbiAgICAgIC8vdGFrZXMgYW4geCx5IHBvc2l0aW9uLCByZXR1cm5zXG4gICAgICAvL3BpeGVscyBmcm9tIHRoZSBsZWZ0LCByaWdodFxuICAgIHJldHVybiB7XG4gICAgICAndG9wJzogKHkgKiAod2lkdGgrYm9yZGVyKSkrJ3B4JyxcbiAgICAgICdsZWZ0JzogKHggKiAod2lkdGgrYm9yZGVyKSkrJ3B4J1xuICAgIH07XG4gIH1cblxuICAvL3V0aWxpdHkgZnVuY3Rpb24gZm9yIHR1cm5pbmcgYSBwaXhlbCBwb3NpdGlvblxuICAvL2ludG8gdGhlIHgseSBjb29yZGluYXRlIG9mIGEgc3F1YXJlIG9uIHRoZSBib2FyZFxuICAvL2l0IGZvbGxvd3MgdGhlIHNhbWUgY29vcmRpbmF0ZSBjb252ZW50aW9uIGFzIGdldFBpeGVsc1xuICBmdW5jdGlvbiBnZXRDb29yZHModG9wLGxlZnQpIHtcbiAgICAgIC8vcmV0dXJucyBhbiB4IGFuZCBhIHlcbiAgICAgIC8vZ2l2ZW4gYSB0b3AgYW5kIGxlZnQgcGl4ZWxzXG4gICAgcmV0dXJuIHtcbiAgICAgICd4JzogbGVmdCAvICh3aWR0aCArIGJvcmRlciksXG4gICAgICAneSc6IHRvcCAvICh3aWR0aCArIGJvcmRlcilcbiAgICB9O1xuICB9XG5cbiAgLy91dGlsaXR5IGZ1bmN0aW9uIGZvciByZXR1cm5pbmdcbiAgLy90aGUgc2V0IG9mIHVub2NjdXBpZWQgZGFyayBzcXVhcmVzXG4gIC8vKHBvc3NpYmxlIHBsYWNlcyB0byBtb3ZlIGEgcGllY2UpXG4gIGZ1bmN0aW9uIGdldE1vdmFibGVTcXVhcmVzKCkge1xuICAgICAgLy9zZWxlY3QgYWxsIG9mIHRoZSBzcXVhcmVzXG4gICAgY29uc3QgJHNxdWFyZXMgPSAkKCdkaXYuc3F1YXJlJyk7XG5cbiAgLy9zZWxlY3QgdGhlIG9jY3VwaWVkIG9uZXMgdXNpbmcgdGhlIGpRdWVyeSBtYXAoKSBtZXRob2RcbiAgLy9tYXAgY3JlYXRlcyBhIG5ldyBvYmplY3QgZnJvbSBhbiBleGlzdGluZyBvbmUgdXNpbmcgYSB0cmFuc2xhdGlvbiBmdW5jdGlvblxuICAgIGNvbnN0ICR0YWtlblNxdWFyZXMgPVxuICAgICAgICAgICQoJ2Rpdi5waWVjZScpLm1hcChmdW5jdGlvbihpbmRleCxwaWVjZSkge1xuICAgICAgICAgICAgLy90aGlzIGZ1bmN0aW9uIHRyYW5zbGF0ZXMgYSBwaWVjZVxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSAkKHBpZWNlKS5wb3NpdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgY29vcmRzID0gZ2V0Q29vcmRzKHBvc2l0aW9uLnRvcCxwb3NpdGlvbi5sZWZ0KTtcbiAgICAgICAgICAgIGNvbnN0IHNxdWFyZUluZGV4ID0gY29vcmRzLnkgKiA4ICsgY29vcmRzLng7XG4gICAgICAgICAgICByZXR1cm4gJHNxdWFyZXNbc3F1YXJlSW5kZXhdO1xuICAgICAgICAgIH0pO1xuXG4gICAgY29uc3QgJG91dCA9ICQoJ2Rpdi5zcXVhcmUuZGFyaycpLm5vdCgkdGFrZW5TcXVhcmVzKTtcbiAgICByZXR1cm4gJG91dDtcbiAgfVxuXG5cblxuICAvL0NyZWF0aW5nIHRoZSA2NCBzcXVhcmVzIGFuZCBhZGRpbmcgdGhlbSB0byB0aGUgRE9NXG4gIGNvbnN0IHNxdWFyZUNvdW50ID0gOCo4O1xuICBmb3IgKGxldCBpID0gMDtpPHNxdWFyZUNvdW50O2krKykge1xuXG4gIC8vdGhpcyBsaW5lIGNyZWF0ZXMgYSBuZXcgZGl2IHdpdGggdGhlIGNsYXNzICdzcXVhcmUnXG4gIC8vYW5kIGFwcGVuZHMgaXQgdG8gdGhlIGRpdiB3aXRoIGlkICdib2FyZCdcbiAgICAkYm9hcmQuYXBwZW5kKCQoJzxkaXYvPicpLmFkZENsYXNzKCdzcXVhcmUnKSk7XG4gIH1cblxuXG4gICAgLy9zZXQgdXAgdGhlIGJvYXJkIHdpdGggdGhlIGNvcnJlY3QgY2xhc3Nlc1xuICAgIC8vZm9yIHRoZSBsaWdodCBhbmQgZGFyayBzcXVhcmVzXG4gIHNldFVwQm9hcmQoKTtcblxuXG4gICAgICAvL2NyZWF0aW5nIHRoZSAyNCBwaWVjZXMgYW5kIGFkZGluZyB0aGVtIHRvIHRoZSBET01cbiAgY29uc3QgcGllY2VDb3VudCA9IDI0O1xuICBmb3IgKGxldCBpPTA7aTxwaWVjZUNvdW50O2krKykge1xuXG4gICAgLy90aGlzIGxpbmUgYXBwZW5kcyBhbiBlbXB0eSBkaXZcbiAgICAvL3dpdGggdGhlIGNsYXNzICdwaWVjZScgdG8gdGhlIGRpdiB3aXRoIGlkICdwaWVjZXMnXG4gICAgJHBpZWNlcy5hcHBlbmQoJCgnPGRpdi8+JykuYWRkQ2xhc3MoJ3BpZWNlJykpO1xuXG4gIH1cblxuXG4gICAgICAvL3NldHMgdXAgdGhlIGNsYXNzZXMgZm9yIHRoZSBkaWZmZXJlbnQgdHlwZXMgb2YgcGllY2VcbiAgc2V0VXBQaWVjZXMoKTtcblxuICAgICAgLy90aGlzIGxvb3AgbW92ZXMgYWxsIHRoZSBsaWdodCBwaWVjZXMgdG8gdGhlaXIgaW5pdGlhbCBwb3NpdGlvbnNcbiAgJCgnZGl2LnBpZWNlLmxpZ2h0JykuZWFjaChmdW5jdGlvbihpbmRleCxwaWVjZSkge1xuXG4gICAgICAgICAgLy90dXJuaW5nIHRoZSBpbmRleCAoZnJvbSAwIC0gMTEpXG4gICAgICAgICAgLy9pbnRvIGEgeCx5IHNxdWFyZSBjb29yZGluYXRlIHVzaW5nIG1hdGhcbiAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihpbmRleCAvIDQpO1xuICAgIGNvbnN0IHggPSAoaW5kZXggJSA0KSAqIDIgKyAoMSAtIHklMik7XG5cbiAgICAgICAgICAvL3R1cm5pbmcgdGhlIHgseSBjb29yZGluZ2F0ZSBpbnRvIGEgcGl4ZWwgcG9zaXRpb25cbiAgICBjb25zdCBwaXhlbFBvc2l0aW9uID0gZ2V0UGl4ZWxzKHgseSk7XG4gICAgICAgICAgLy9hY3R1YWxseSBtb3ZpbmcgdGhlIHBpZWNlIHRvIGl0cyBpbml0aWFsIHBvc2l0aW9uXG4gICAgbW92ZVBpZWNlVG8oJChwaWVjZSkscGl4ZWxQb3NpdGlvbi50b3AscGl4ZWxQb3NpdGlvbi5sZWZ0KTtcbiAgfSk7XG5cbiAgICAgIC8vdGhpcyBsb29wIG1vdmVzIGFsbCB0aGUgZGFyayBwaWVjZXMgdG8gdGhlaXIgaW5pdGlhbCBwb3NpdGlvbnNcbiAgJCgnZGl2LnBpZWNlLmRhcmsnKS5lYWNoKGZ1bmN0aW9uKGluZGV4LHBpZWNlKSB7XG4gICAgICAgICAgLy90dXJuaW5nIHRoZSBpbmRleCAoZnJvbSAwIC0gMTEpXG4gICAgICAgICAgLy9pbnRvIGEgeCx5IHNxdWFyZSBjb29yZGluYXRlIHVzaW5nIG1hdGhcbiAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihpbmRleC80KSArIDU7XG4gICAgY29uc3QgeCA9IChpbmRleCAlIDQpICogMiArICgxLXklMik7XG5cbiAgICAgICAgICAvL3R1cm5pbmcgdGhlIHgseSBjb29yZGluYXRlIGludG8gYSBwaXhlbCBwb3NpdGlvblxuICAgIGNvbnN0IHBpeGVsUG9zaXRpb24gPSBnZXRQaXhlbHMoeCx5KTtcbiAgICAgICAgICAvL21vdmluZyB0aGUgcGllY2UgdG8gaXRzIGluaXRpYWwgcG9zaXRpb25cbiAgICBtb3ZlUGllY2VUbygkKHBpZWNlKSxwaXhlbFBvc2l0aW9uLnRvcCxwaXhlbFBvc2l0aW9uLmxlZnQpO1xuICB9KTtcblxuICAgICAgLy9zZXQgdXAgaW5pdGlhbCBzcXVhcmVzXG4gICAgICAvL3RoZSBjbGFzcyAnbW92YWJsZScgcmVwcmVzZW50cyBhIHNxdWFyZVxuICAgICAgLy90aGF0IGlzIHVub2NjdXBpZWRcbiAgZ2V0TW92YWJsZVNxdWFyZXMoKS5hZGRDbGFzcygnbW92YWJsZScpO1xuXG4gICAgICAvL2FuZCBub3cgdGhlIGV2ZW50c1xuICAkKCdkaXYucGllY2UnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAvL3R1cm4gYHRoaXNgIGludG8gYSBqUXVlcnkgb2JqZWN0XG4gICAgY29uc3QgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgIC8vdG9nZ2xlaW5nIHRoZSAnc2VsZWN0ZWQnIGNsYXNzIG9mIHRoaXMgcGllY2VcbiAgICAgICAgICAvL2FuZCBwb3NzaWJsZSBkZXNlbGVjdGluZyBvdGhlciBwaWVjZXNcbiAgICB0b2dnbGVTZWxlY3QoJHRoaXMpO1xuICB9KTtcblxuICAkKCdkaXYuc3F1YXJlJykuY2xpY2soZnVuY3Rpb24oKSB7XG5cbiAgICAvL3R1cm4gYHRoaXNgIGludG8gYSBqUXVlcnkgb2JqZWN0XG4gICAgY29uc3QgJHRoaXMgPSAkKHRoaXMpO1xuXG4gICAgLy9pZiAkdGhpcyBpcyBhIGxlZ2FsIHNxdWFyZSB0byBtb3ZlIHRvLi4uXG4gICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdtb3ZhYmxlJykpIHtcblxuICAgICAgLy9nZXQgdGhlIHBpZWNlIHdpdGggdGhlIGNsYXNzICdzZWxlY3RlZCdcbiAgICAgIGNvbnN0ICRzZWxlY3RlZFBpZWNlID0gJCgnZGl2LnBpZWNlLnNlbGVjdGVkJyk7XG5cbiAgICAgIC8vb25seSBtb3ZlIGlmIHRoZXJlIGlzIGV4YWN0bHkgb25lIHNlbGVjdGVkIHBpZWNlXG4gICAgICBpZiAoJHNlbGVjdGVkUGllY2UubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vZ2V0IHRoZSBpbmRleCBvZiB0aGUgc3F1YXJlXG4gICAgICAgIC8vYW5kIHRyYW5zbGF0ZSBpdCB0byBwaXhlbCBwb3NpdGlvblxuICAgICAgICBjb25zdCBpbmRleCA9ICR0aGlzLnByZXZBbGwoKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHggPSBpbmRleCAlIDg7XG4gICAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKGluZGV4IC8gOCk7XG4gICAgICAgIGNvbnN0IHBpeGVscyA9IGdldFBpeGVscyh4LHkpO1xuICAgICAgICAvL2FjdHVhbGx5IGRvIHRoZSBtb3ZpbmdcbiAgICAgICAgbW92ZVBpZWNlVG8oJHNlbGVjdGVkUGllY2UscGl4ZWxzLnRvcCxwaXhlbHMubGVmdCk7XG4gICAgICAgIC8vaW5jcmVtZW50IHRoZSBtb3ZlIGNvdW50ZXJcbiAgICAgICAgaW5jcmVtZW50bW92ZUNvdW50ZXIoKTtcbiAgICAgICAgLy91bi1zZWxlY3QgdGhlIHBpZWNlXG4gICAgICAgICRzZWxlY3RlZFBpZWNlLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuXG4gICAgICAgIC8vc2V0IHRoZSBuZXcgbGVnYWwgbW92ZXNcbiAgICAgICAgJCgnZGl2LnNxdWFyZScpLnJlbW92ZUNsYXNzKCdtb3ZhYmxlJyk7XG4gICAgICAgIGdldE1vdmFibGVTcXVhcmVzKCkuYWRkQ2xhc3MoJ21vdmFibGUnKTtcbiAgICAgIH1cblxuICAgIH1cbiAgfSk7XG5cblxuXG4gIC8vIEZVTkNUSU9OU1xuICBmdW5jdGlvbiBzZXRVcFBpZWNlcygpIHtcbiAgICAgIC8vc2VsZWN0IGFsbCB0aGUgZGl2cyB3aXRoIGNsYXNzICdwaWVjZSdcbiAgICAkKCdwaWVjZScpO1xuLy9hZGQgdGhlICdsaWdodCcgY2xhc3MgdG8gaGFsZiBvZiB0aGVtXG4gICAgY29uc3QgIGxpZ2h0UGllY2VzID0gJCgnZGl2LnBpZWNlOmV2ZW4nKS5hZGRDbGFzcygnbGlnaHQnKTtcbi8valF1ZXJ5J3MgZXZlbiBhbmQgb2RkIHNlbGVjdG9yIG1ldGhvZHMgdG8gYXNzaWduIHRoZSBjbGFzc2VzIC5saWdodCBhbmQgLmRhcmsuXG4vL2FkZCB0aGUgJ2RhcmsnIHRvIHRoZSBvdGhlciBoYWxmXG4gICAgY29uc3QgIGRhcmtQaWVjZXMgPSAkKCdkaXYucGllY2U6b2RkJykuYWRkQ2xhc3MoJ2RhcmsnKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gbW92ZVBpZWNlVG8oJHBpZWNlLG5ld1RvcCxuZXdMZWZ0KSB7XG4gICAgICAvL3NldCB0aGUgY3NzICd0b3AnIGFuZCAnbGVmdCdcbiAgICAgIC8vYXR0cmlidXRlcyBvZiB0aGUgcGFzc2VkIHBpZWNlXG4gICAgICAvL3RvIHRoZSBhcmd1bWVudHMgbmV3VG9wIGFuZCBuZXdMZWZ0XG4gICAgJHBpZWNlLmNzcygndG9wJywgbmV3VG9wKTtcbiAgICAkcGllY2UuY3NzKCdsZWZ0JywgbmV3TGVmdCk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFVwQm9hcmQoKSB7XG4gICAgICAvL2l0ZXJhdGUgdGhyb3VnaCBhbGwgb2YgdGhlIGRpdnMgd2l0aCBjbGFzcyBgc3F1YXJlYFxuICAgICAgLy9maWd1cmUgb3V0IHdoZXRoZXIgZWFjaCBvbmUgc2hvdWxkIGJlXG4gICAgICAvL2xpZ2h0IG9yIGRhcmssIGFuZCBhc3NpZ24gdGhlIHByb3BlciBjbGFzc1xuICAgIGNvbnN0ICRlYWNoU3F1YXJlID0gJCgnZGl2LnNxdWFyZScpO1xuICAgICRlYWNoU3F1YXJlLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgaWYobGlnaHRPckRhcmsoaW5kZXgpPT09IDApe1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdsaWdodCcpO1xuICAgICAgfWVsc2V7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2RhcmsnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICAgIC8vaW5uZXIgaGVscGVyIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBudW1iZXIgYmV0d2VlblxuICAgICAgLy8wIGFuZCA2MyAoaW5jbHVzaXZlKSBhbmQgcmV0dXJucyAxIGlmIHRoZSBzcXVhcmUgc2hvdWxkIGJlXG4gICAgICAvL2RhcmssIGFuZCAwIGlmIHRoZSBzcXVhcmUgc2hvdWxkIGJlIGxpZ2h0XG4gICAgZnVuY3Rpb24gbGlnaHRPckRhcmsoaW5kZXgpIHtcbiAgICAgIGNvbnN0IHggPSBpbmRleCAlIDg7XG4gICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihpbmRleCAvIDgpO1xuICAgICAgY29uc3Qgb2RkWCA9IHggJSAyO1xuICAgICAgY29uc3Qgb2RkWSA9IHkgJSAyO1xuICAgICAgcmV0dXJuIChvZGRYIF4gb2RkWSk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiB0b2dnbGVTZWxlY3QoJHBpZWNlKSB7XG4gICAgICAvL2lmICRwaWVjZSBoYXMgdGhlIGNsYXNzICdzZWxlY3RlZCcsXG4gICAgICAvL3JlbW92ZSBpdFxuXG4gICAgICAvL2lmICRwaWVjZSBkb2VzIG5vdCBoYXZlIHRoZSBjbGFzcyAnc2VsZWN0ZWQnXG4gICAgICAvL21ha2Ugc3VyZSBubyBvdGhlciBkaXZzIHdpdGggdGhlIGNsYXNzICdwaWVjZSdcbiAgICAgIC8vaGF2ZSB0aGF0IGNsYXNzLCB0aGVuIHNldCAkcGllY2UgdG8gaGF2ZSB0aGUgY2xhc3NcbiAgICBpZigkcGllY2UuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpXG4gICAgICAkcGllY2UucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgZWxzZSB7XG4gICAgICAkKCdkaXYucGllY2UnKS5lYWNoKGZ1bmN0aW9uKGluZGV4LHBpZWNlKSB7XG4gICAgICAgIGlmKCQocGllY2UpLmhhc0NsYXNzKCdzZWxlY3RlZCcpKVxuICAgICAgICAgICQocGllY2UpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgfSk7XG4gICAgICAkcGllY2UuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBpbmNyZW1lbnRtb3ZlQ291bnRlcigpIHtcbiAgICAgIC8vZ2V0cyB0aGUgaHRtbCBvZiB0aGUgc3BhbiB3aXRoIGlkIG1vdmVDb3VudGVyXG4gICAgICAvL3R1cm5zIGl0IGludG8gYSBudW1iZXJcbiAgICAgIC8vaW5jcmVtZW50cyBpdCBieSBvbmVcbiAgICAgIC8vc2V0cyB0aGUgaHRtbCBvZiB0aGUgc3BhbiB3aXRoIGlkIG1vdmVDb3VudGVyXG4gICAgICAvL3RvIHRoZSBuZXcgbW92ZSBjb3VudFxuICAgICQoJyNtb3ZlQ291bnRlcicpLmh0bWwocGFyc2VJbnQoJCgnI21vdmVDb3VudGVyJykuaHRtbCgpLDEwKSsxKTtcbiAgfVxuXG5cbn0pOy8vZW5kIG9mIEpTIGxvYWRcbiJdfQ==
